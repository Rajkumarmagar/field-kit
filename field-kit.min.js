!function(a){if("function"==typeof bootstrap)bootstrap("fieldkit",a);else if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeFieldKit=a}else"undefined"!=typeof window?window.FieldKit=a():global.FieldKit=a()}(function(){return function(a,b,c){function d(c,f){if(!b[c]){if(!a[c]){var g="function"==typeof require&&require;if(!f&&g)return g(c,!0);if(e)return e(c,!0);throw new Error("Cannot find module '"+c+"'")}var h=b[c]={exports:{}};a[c][0].call(h.exports,function(b){var e=a[c][1][b];return d(e?e:b)},h,h.exports)}return b[c].exports}for(var e="function"==typeof require&&require,f=0;f<c.length;f++)d(c[f]);return d}({1:[function(a,b){b.exports={AdaptiveCardFormatter:a("./adaptive_card_formatter"),AmexCardFormatter:a("./amex_card_formatter"),CardTextField:a("./card_text_field"),DefaultCardFormatter:a("./default_card_formatter"),DelimitedTextFormatter:a("./delimited_text_formatter"),ExpiryDateField:a("./expiry_date_field"),ExpiryDateFormatter:a("./expiry_date_formatter"),Formatter:a("./formatter"),NumberFormatter:a("./number_formatter"),PhoneFormatter:a("./phone_formatter"),SocialSecurityNumberFormatter:a("./social_security_number_formatter"),TextField:a("./text_field"),UndoManager:a("./undo_manager")}},{"./adaptive_card_formatter":2,"./amex_card_formatter":3,"./card_text_field":4,"./default_card_formatter":5,"./delimited_text_formatter":6,"./expiry_date_field":7,"./expiry_date_formatter":8,"./formatter":9,"./number_formatter":10,"./phone_formatter":11,"./social_security_number_formatter":12,"./text_field":13,"./undo_manager":14}],9:[function(a,b){function c(){}c.prototype.maximumLength=null,c.prototype.format=function(a){return(void 0===a||null===a)&&(a=""),void 0!==this.maximumLength&&null!==this.maximumLength&&(a=a.substring(0,this.maximumLength)),a},c.prototype.parse=function(a){return(void 0===a||null===a)&&(a=""),void 0!==this.maximumLength&&null!==this.maximumLength&&(a=a.substring(0,this.maximumLength)),a},c.prototype.isChangeValid=function(a){var b=a.proposed.selectedRange,c=a.proposed.text;if(void 0!==this.maximumLength&&null!==this.maximumLength&&c.length>this.maximumLength){var d=this.maximumLength-(c.length-a.inserted.text.length),e=a.current.text.substring(0,a.current.selectedRange.start);d>0&&(e+=a.inserted.text.substring(0,d)),e+=a.current.text.substring(a.current.selectedRange.start+a.current.selectedRange.length),truncatedLength=c.length-e.length,a.proposed.text=e,b.start-=truncatedLength}return!0},b.exports=c},{}],14:[function(a,b){function c(a,b){try{Object.getOwnPropertyDescriptor({},"sq")}catch(c){return!1}var d;return a&&a.constructor&&a.constructor.prototype&&(d=Object.getOwnPropertyDescriptor(a.constructor.prototype,b)),d||(d=Object.getOwnPropertyDescriptor(a,b)),d&&d.get?!0:!1}function d(){this._undos=[],this._redos=[]}d.prototype._undos=null,d.prototype._redos=null,d.prototype._isUndoing=!1,d.prototype._isRedoing=!1,d.prototype.canUndo=function(){return 0!==this._undos.length},d.prototype.canRedo=function(){return 0!==this._redos.length},d.prototype.isUndoing=function(){return this._isUndoing},d.prototype.isRedoing=function(){return this._isRedoing},d.prototype.registerUndo=function(){return this._isUndoing?this._appendRedo.apply(this,arguments):(this._isRedoing||(this._redos.length=0),this._appendUndo.apply(this,arguments)),null},d.prototype._appendUndo=function(a,b){this._undos.push({target:a,selector:b,args:[].slice.call(arguments,2)})},d.prototype._appendRedo=function(a,b){this._redos.push({target:a,selector:b,args:[].slice.call(arguments,2)})},d.prototype.undo=function(){if(!this.canUndo())throw new Error("there are no registered undos");var a=this._undos.pop(),b=a.target,c=a.selector,d=a.args;this._isUndoing=!0,b[c].apply(b,d),this._isUndoing=!1},d.prototype.redo=function(){if(!this.canRedo())throw new Error("there are no registered redos");var a=this._redos.pop(),b=a.target,c=a.selector,d=a.args;return this._isRedoing=!0,b[c].apply(b,d),this._isRedoing=!1,null},d.prototype.proxyFor=function(a){var b={},d=this;for(var e in a)c(a,e)||"function"==typeof a[e]&&!function(c){b[c]=function(){d.registerUndo.apply(d,[a,c].concat([].slice.call(arguments)))}}(e);return b},b.exports=d},{}],2:[function(a,b){function c(){this.amexCardFormatter=new d,this.defaultCardFormatter=new e,this.formatter=this.defaultCardFormatter}var d=a("./amex_card_formatter"),e=a("./default_card_formatter"),f=a("./card_utils");c.prototype.format=function(a){return this._formatterForPan(a).format(a)},c.prototype.parse=function(a,b){return this.formatter.parse(a,b)},c.prototype.isChangeValid=function(a){return this.formatter=this._formatterForPan(a.proposed.text),this.formatter.isChangeValid(a)},c.prototype._formatterForPan=function(a){return f.determineCardType(a.replace(/[^\d]+/g,""))===f.AMEX?this.amexCardFormatter:this.defaultCardFormatter},b.exports=c},{"./amex_card_formatter":3,"./card_utils":15,"./default_card_formatter":5}],4:[function(a,b){function c(a){d.call(this,a,new e),this.setCardMaskStrategy(g.None)}var d=a("./text_field"),e=a("./adaptive_card_formatter"),f=a("./card_utils"),g={None:"None",DoneEditing:"DoneEditing"};c.prototype=Object.create(d.prototype),c.prototype.cardType=function(){return f.determineCardType(this.value())},c.prototype.cardMaskStrategy=function(){return this._cardMaskStrategy},c.prototype.setCardMaskStrategy=function(a){return a!==this._cardMaskStrategy&&(this._cardMaskStrategy=a,this._syncMask()),null},c.prototype.cardMask=function(){var a=this.text(),b=a.slice(0,-4),c=a.slice(-4);return b.replace(/\d/g,"â€¢")+c},c.prototype._masked=!1,c.prototype._editing=!1,c.prototype.text=function(){return this._masked?this._unmaskedText:d.prototype.text.call(this)},c.prototype.setText=function(a){this._masked&&(this._unmaskedText=a,a=this.cardMask()),d.prototype.setText.call(this,a)},c.prototype.textFieldDidEndEditing=function(){this._editing=!1,this._syncMask()},c.prototype.textFieldDidBeginEditing=function(){this._editing=!0,this._syncMask()},c.prototype._enableMasking=function(){this._masked||(this._unmaskedText=this.text(),this._masked=!0,this.setText(this._unmaskedText))},c.prototype._disableMasking=function(){this._masked&&(this._masked=!1,this.setText(this._unmaskedText),this._unmaskedText=null)},c.prototype._syncMask=function(){this.cardMaskStrategy()===g.DoneEditing&&(this._editing?this._disableMasking():this._enableMasking())},c.CardMaskStrategy=g,b.exports=c},{"./text_field":13,"./adaptive_card_formatter":2,"./card_utils":15}],3:[function(a,b){function c(){d.apply(this,arguments)}var d=a("./default_card_formatter");c.prototype=Object.create(d.prototype),c.prototype.maximumLength=17,c.prototype.hasDelimiterAtIndex=function(a){return 4===a||11===a},b.exports=c},{"./default_card_formatter":5}],5:[function(a,b){function c(){d.apply(this,arguments)}var d=a("./delimited_text_formatter"),e=a("./card_utils");c.prototype=Object.create(d.prototype),c.prototype.delimiter=" ",c.prototype.maximumLength=19,c.prototype.hasDelimiterAtIndex=function(a){return 4===a||9===a||14===a},c.prototype.parse=function(a,b){var c=this._valueFromText(a);return"function"==typeof b&&(e.validCardLength(c)||b("card-formatter.number-too-short"),e.luhnCheck(c)||b("card-formatter.invalid-number")),d.prototype.parse.call(this,a,b)},c.prototype._valueFromText=function(a){return d.prototype._valueFromText.call(this,(a||"").replace(/[^\d]/g,""))},b.exports=c},{"./delimited_text_formatter":6,"./card_utils":15}],6:[function(a,b){function c(a){if(a||(a=this.delimiter),null===a||void 0===a||1!==a.length)throw new Error("delimiter must have just one character");this.delimiter=a}var d=a("./formatter");c.prototype=Object.create(d.prototype),c.prototype.delimiter=null,c.prototype.delimiterAt=function(a){return this.hasDelimiterAtIndex(a)?this.delimiter:null},c.prototype.isDelimiter=function(a){return a===this.delimiter},c.prototype.format=function(a){return this._textFromValue(a)},c.prototype._textFromValue=function(a){if(!a)return"";for(var b="",c=0,d=a.length;d>c;c++){for(;delimiter=this.delimiterAt(b.length);)b+=delimiter;for(b+=a[c];delimiter=this.delimiterAt(b.length);)b+=delimiter}return b},c.prototype.parse=function(a){return this._valueFromText(a)},c.prototype._valueFromText=function(a){if(!a)return"";for(var b="",c=0,d=a.length;d>c;c++)this.isDelimiter(a[c])||(b+=a[c]);return b},c.prototype.isChangeValid=function(a,b){if(!d.prototype.isChangeValid.call(this,a,b))return!1;var c=a.proposed.text,e=a.proposed.selectedRange,f=0!==e.length,g=e.start<a.current.selectedRange.start,h=e.start>a.current.selectedRange.start,i=e.start+e.length<a.current.selectedRange.start+a.current.selectedRange.length,j=e.start+e.length>a.current.selectedRange.start+a.current.selectedRange.length,k=g&&this.hasDelimiterAtIndex(e.start)||h&&this.hasDelimiterAtIndex(e.start-1),l=i&&this.hasDelimiterAtIndex(e.start+e.length)||j&&this.hasDelimiterAtIndex(e.start+e.length-1);if(this.isDelimiter(a.deleted.text)){for(var m=a.deleted.start-1;this.isDelimiter(c.charAt(m));)c=c.substring(0,m)+c.substring(m+1),m--;c=c.substring(0,m)+c.substring(m+1)}if(g&&k){for(;this.delimiterAt(e.start-1);)e.start--,e.length++;e.start--,e.length++}if(h){for(;this.delimiterAt(e.start);)e.start++,e.length--;if(k)for(e.start++,e.length--;this.delimiterAt(e.start);)e.start++,e.length--}if(f){if(l){if(i){for(;this.delimiterAt(e.start+e.length-1);)e.length--;e.length--}if(j){for(;this.delimiterAt(e.start+e.length);)e.length++;e.length++}}for(;this.hasDelimiterAtIndex(e.start+e.length-1);)g||i?e.length--:e.length++;for(;this.hasDelimiterAtIndex(e.start);)h||j?(e.start++,e.length--):(e.start--,e.length++)}else e.length=0;var n=!0,o=this._valueFromText(c,function(){n=!1,b.apply(null,arguments)});return n&&(a.proposed.text=this._textFromValue(o)),n},b.exports=c},{"./formatter":9}],7:[function(a,b){!function(){function c(a){d.call(this,a,new e)}var d=a("./text_field"),e=a("./expiry_date_formatter");c.prototype=Object.create(d.prototype),c.prototype.textFieldDidEndEditing=function(){var a=this.value();return a?this.setText(this.formatter().format(a)):void 0},b.exports=c}()},{"./text_field":13,"./expiry_date_formatter":8}],8:[function(a,b){function c(a){var b=(new Date).getFullYear(),c=b-b%100,d=[c,c-100,c+100].sort(function(c,d){return Math.abs(b-(a+c))-Math.abs(b-(a+d))});return a+d[0]}function d(){e.apply(this,arguments)}var e=a("./delimited_text_formatter"),f=a("./utils").zpad2;d.prototype=Object.create(e.prototype),d.prototype.delimiter="/",d.prototype.maximumLength=5,d.prototype.hasDelimiterAtIndex=function(a){return 2===a},d.prototype.format=function(a){if(!a)return"";var b=a.month,c=a.year;return c%=100,e.prototype.format.call(this,f(b)+f(c))},d.prototype.parse=function(a,b){var d=a.split(this.delimiter),e=d[0],f=d[1];return e&&e.match(/^(0?[1-9]|1\d)$/)&&f&&f.match(/^\d\d?$/)?(e=Number(e),f=c(Number(f)),{month:e,year:f}):("function"==typeof b&&b("expiry-date-formatter.invalid-date"),null)},d.prototype.isChangeValid=function(a,b){b||(b=function(){});var c=a.proposed.text.length<a.current.text.length,d=a.proposed.text;if(c)a.deleted.text===this.delimiter&&(d=d[0]),"0"===d&&(d="");else if(a.inserted.text===this.delimiter&&"1"===a.current.text)d="01"+this.delimiter;else{if(a.inserted.text.length>0&&!/^\d$/.test(a.inserted.text))return b("expiry-date-formatter.only-digits-allowed"),!1;if(/^[2-9]$/.test(d)&&(d="0"+d),/^1[3-9]$/.test(d))return b("expiry-date-formatter.invalid-month"),!1;if("00"===d)return b("expiry-date-formatter.invalid-month"),!1;/^(0[1-9]|1[0-2])$/.test(d)&&(d+=this.delimiter),(match=d.match(/^(\d\d)(.)(\d\d?).*$/))&&match[2]===this.delimiter&&(d=match[1]+this.delimiter+match[3])}return a.proposed.text=d,a.proposed.selectedRange={start:d.length,length:0},!0},b.exports=d},{"./delimited_text_formatter":6,"./utils":16}],11:[function(a,b){function c(){if(0!==arguments.length)throw new Error("were you trying to set a delimiter ("+arguments[0]+")?")}var d=a("./delimited_text_formatter"),e={0:"(",4:")",5:" ",9:"-"},f={1:" ",2:"(",6:")",7:" ",11:"-"},g={2:" ",3:"(",7:")",8:" ",12:"-"},h=/[-\(\) ]/g;c.prototype=Object.create(d.prototype),c.prototype.maximumLength=null,c.prototype.delimiterMap=null,c.prototype.isDelimiter=function(a){var b=this.delimiterMap;for(var c in b)if(b.hasOwnProperty(c)&&b[c]===a)return!0;return!1},c.prototype.delimiterAt=function(a){return this.delimiterMap[a]},c.prototype.hasDelimiterAtIndex=function(a){var b=this.delimiterAt(a);return void 0!==b&&null!==b},c.prototype.parse=function(a,b){b||(b=function(){});var c=this.digitsWithoutCountryCode(a);return a.length<10&&b("phone-formatter.number-too-short"),"0"===c[0]&&b("phone-formatter.area-code-zero"),"1"===c[0]&&b("phone-formatter.area-code-one"),"9"===c[1]&&b("phone-formatter.area-code-n9n"),"1"===c[3]&&b("phone-formatter.central-office-one"),"11"===c.slice(4,6)&&b("phone-formatter.central-office-n11"),d.prototype.parse.call(this,a,b)},c.prototype.format=function(a){return this.guessFormatFromText(a),d.prototype.format.call(this,this.removeDelimiterMapChars(a))},c.prototype.isChangeValid=function(a,b){if(this.guessFormatFromText(a.proposed.text),a.inserted.text.length>1){var c=a.current.text,e=a.current.selectedRange,f=a.inserted.text,g=this.format((c.slice(0,e.start)+f+c.slice(e.start+e.length)).replace(/[^\d]/g,""));return a.proposed={text:g,selectedRange:{start:g.length-(c.length-(e.start+e.length)),length:0}},d.prototype.isChangeValid.call(this,a,b)}return/^\d*$/.test(a.inserted.text)||0===a.proposed.text.indexOf("+")?d.prototype.isChangeValid.call(this,a,b):!1},c.prototype.guessFormatFromText=function(a){a&&"+"===a[0]?(this.delimiterMap=g,this.maximumLength=17):a&&"1"===a[0]?(this.delimiterMap=f,this.maximumLength=16):(this.delimiterMap=e,this.maximumLength=14)},c.prototype.digitsWithoutCountryCode=function(a){var b=(a||"").replace(/[^\d]/g,""),c=b.length-10;return c>0&&(b=b.substr(c)),b},c.prototype.removeDelimiterMapChars=function(a){return(a||"").replace(h,"")},b.exports=c},{"./delimited_text_formatter":6}],12:[function(a,b){function c(){d.apply(this,arguments)}var d=a("./delimited_text_formatter"),e=/^\d*$/;c.prototype=Object.create(d.prototype),c.prototype.delimiter="-",c.prototype.maximumLength=11,c.prototype.hasDelimiterAtIndex=function(a){return 3===a||6===a},c.prototype.isChangeValid=function(a){return e.test(a.inserted.text)?d.prototype.isChangeValid.call(this,a):!1},b.exports=c},{"./delimited_text_formatter":6}],13:[function(a,b){function c(a){return a&&/^\w$/.test(a)}function d(a,b){return 0===b?!0:!c(a[b-1])&&c(a[b])}function e(a,b){return b===a.length?!0:c(a[b])&&!c(a[b+1])}function f(a,b){if(this.element=a,this._formatter=b,this._focusout=m(this._focusout,this),this._focusin=m(this._focusin,this),this.click=m(this.click,this),this.paste=m(this.paste,this),this.keyUp=m(this.keyUp,this),this.keyPress=m(this.keyPress,this),this.keyDown=m(this.keyDown,this),this.element.data("field-kit-text-field"))throw new Error("already attached a TextField to this element");this.element.data("field-kit-text-field",this),this._jQuery=this.element.constructor,this.element.on("keydown.field-kit",this.keyDown),this.element.on("keypress.field-kit",this.keyPress),this.element.on("keyup.field-kit",this.keyUp),this.element.on("click.field-kit",this.click),this.element.on("paste.field-kit",this.paste),this.element.on("focusin.field-kit",this._focusin),this.element.on("focusout.field-kit",this._focusout),this._buildKeybindings()}function g(a){this.field=a}var h=a("./formatter"),i=a("./undo_manager"),j=a("./keybindings"),k=j.KEYS,l=j.keyBindingsForPlatform,m=a("./utils").bind,n={UPSTREAM:0,DOWNSTREAM:1,NONE:null};f.prototype.selectionAffinity=n.NONE,f.prototype._delegate=null,f.prototype.delegate=function(){return this._delegate},f.prototype.setDelegate=function(a){return this._delegate=a,null},f.prototype.destroy=function(){return this.element.off(".field-kit"),this.element.data("field-kit-text-field",null),null},f.prototype.insertText=function(a){var b;return this.hasSelection()&&this.clearSelection(),this.replaceSelection(a),b=this.selectedRange(),b.start+=b.length,b.length=0,this.setSelectedRange(b)},f.prototype.insertNewline=function(){this._textFieldDidEndEditing(),this._didEndEditingButKeptFocus=!0},f.prototype._textDidChange=function(){var a=this._delegate;this.textDidChange(),a&&"function"==typeof a.textDidChange&&a.textDidChange(this)},f.prototype.textDidChange=function(){},f.prototype._textFieldDidEndEditing=function(){var a=this._delegate;this.textFieldDidEndEditing(),a&&"function"==typeof a.textFieldDidEndEditing&&a.textFieldDidEndEditing(this)},f.prototype.textFieldDidEndEditing=function(){},f.prototype._textFieldDidBeginEditing=function(){var a=this._delegate;this.textFieldDidBeginEditing(),a&&"function"==typeof a.textFieldDidBeginEditing&&a.textFieldDidBeginEditing(this)},f.prototype.textFieldDidBeginEditing=function(){},f.prototype.moveUp=function(a){a.preventDefault(),this.setSelectedRange({start:0,length:0})},f.prototype.moveToBeginningOfParagraph=function(a){this.moveUp(a)},f.prototype.moveUpAndModifySelection=function(a){a.preventDefault();var b=this.selectedRange();switch(this.selectionAffinity){case n.UPSTREAM:case n.NONE:b.length+=b.start,b.start=0;break;case n.DOWNSTREAM:b.length=b.start,b.start=0}this.setSelectedRangeWithAffinity(b,n.UPSTREAM)},f.prototype.moveParagraphBackwardAndModifySelection=function(a){a.preventDefault();var b=this.selectedRange();switch(this.selectionAffinity){case n.UPSTREAM:case n.NONE:b.length+=b.start,b.start=0;break;case n.DOWNSTREAM:b.length=0}this.setSelectedRangeWithAffinity(b,n.UPSTREAM)},f.prototype.moveToBeginningOfDocument=function(a){this.moveToBeginningOfLine(a)},f.prototype.moveToBeginningOfDocumentAndModifySelection=function(a){a.preventDefault();var b=this.selectedRange();return b.length+=b.start,b.start=0,this.setSelectedRangeWithAffinity(b,n.UPSTREAM)},f.prototype.moveDown=function(a){a.preventDefault();var b={start:this.text().length,length:0};this.setSelectedRangeWithAffinity(b,n.NONE)},f.prototype.moveToEndOfParagraph=function(a){this.moveDown(a)},f.prototype.moveDownAndModifySelection=function(a){a.preventDefault();var b=this.selectedRange(),c=this.text().length;this.selectionAffinity===n.UPSTREAM&&(b.start+=b.length),b.length=c-b.start,this.setSelectedRangeWithAffinity(b,n.DOWNSTREAM)},f.prototype.moveParagraphForwardAndModifySelection=function(a){a.preventDefault();var b=this.selectedRange();switch(this.selectionAffinity){case n.DOWNSTREAM:case n.NONE:b.length=this.text().length-b.start;break;case n.UPSTREAM:b.start+=b.length,b.length=0}this.setSelectedRangeWithAffinity(b,n.DOWNSTREAM)},f.prototype.moveToEndOfDocument=function(a){this.moveToEndOfLine(a)},f.prototype.moveToEndOfDocumentAndModifySelection=function(a){a.preventDefault();var b=this.selectedRange();b.length=this.text().length-b.start,this.setSelectedRangeWithAffinity(b,n.DOWNSTREAM)},f.prototype.moveLeft=function(a){a.preventDefault();var b=this.selectedRange();0!==b.length?b.length=0:b.start--,this.setSelectedRangeWithAffinity(b,n.NONE)},f.prototype.moveLeftAndModifySelection=function(a){a.preventDefault();var b=this.selectedRange();switch(this.selectionAffinity){case n.UPSTREAM:case n.NONE:this.selectionAffinity=n.UPSTREAM,b.start--,b.length++;break;case n.DOWNSTREAM:b.length--}this.setSelectedRange(b)},f.prototype.moveWordLeft=function(a){a.preventDefault();var b=this.lastWordBreakBeforeIndex(this.selectedRange().start-1);this.setSelectedRange({start:b,length:0})},f.prototype.moveWordLeftAndModifySelection=function(a){a.preventDefault();var b=this.selectedRange();switch(this.selectionAffinity){case n.UPSTREAM:case n.NONE:this.selectionAffinity=n.UPSTREAM;var c=this.lastWordBreakBeforeIndex(b.start-1);b.length+=b.start-c,b.start=c;break;case n.DOWNSTREAM:var d=this.lastWordBreakBeforeIndex(b.start+b.length);d<b.start&&(d=b.start),b.length-=b.start+b.length-d}this.setSelectedRange(b)},f.prototype.moveToBeginningOfLine=function(a){a.preventDefault(),this.setSelectedRange({start:0,length:0})},f.prototype.moveToBeginningOfLineAndModifySelection=function(a){a.preventDefault();var b=this.selectedRange();b.length+=b.start,b.start=0,this.setSelectedRangeWithAffinity(b,n.UPSTREAM)},f.prototype.moveRight=function(a){a.preventDefault();var b=this.selectedRange();0!==b.length?(b.start+=b.length,b.length=0):b.start++,this.setSelectedRangeWithAffinity(b,n.NONE)},f.prototype.moveRightAndModifySelection=function(a){a.preventDefault();var b=this.selectedRange();switch(this.selectionAffinity){case n.UPSTREAM:b.start++,b.length--;break;case n.DOWNSTREAM:case n.NONE:this.selectionAffinity=n.DOWNSTREAM,b.length++}this.setSelectedRange(b)},f.prototype.moveWordRight=function(a){a.preventDefault();var b=this.selectedRange(),c=this.nextWordBreakAfterIndex(b.start+b.length);this.setSelectedRange({start:c,length:0})},f.prototype.moveWordRightAndModifySelection=function(a){a.preventDefault();var b=this.selectedRange(),c=b.start,d=b.start+b.length;switch(this.selectionAffinity){case n.UPSTREAM:c=Math.min(this.nextWordBreakAfterIndex(c),d);break;case n.DOWNSTREAM:case n.NONE:this.selectionAffinity=n.DOWNSTREAM,d=this.nextWordBreakAfterIndex(b.start+b.length)}this.setSelectedRange({start:c,length:d-c})},f.prototype.moveToEndOfLine=function(a){a.preventDefault(),this.setSelectedRange({start:this.text().length,length:0})},f.prototype.moveToEndOfLineAndModifySelection=function(a){a.preventDefault();var b=this.selectedRange();b.length=this.text().length-b.start,this.setSelectedRangeWithAffinity(b,n.DOWNSTREAM)},f.prototype.deleteBackward=function(a){a.preventDefault();var b=this.selectedRange();0===b.length&&(b.start--,b.length++,this.setSelectedRange(b)),this.clearSelection()},f.prototype.deleteWordBackward=function(a){if(this.hasSelection())this.deleteBackward(a);else{a.preventDefault();var b=this.selectedRange(),c=this.lastWordBreakBeforeIndex(b.start);b.length+=b.start-c,b.start=c,this.setSelectedRange(b),this.clearSelection()}},f.prototype.deleteBackwardByDecomposingPreviousCharacter=function(a){this.deleteBackward(a)},f.prototype.deleteBackwardToBeginningOfLine=function(a){if(this.hasSelection())this.deleteBackward(a);else{a.preventDefault();var b=this.selectedRange();b.length=b.start,b.start=0,this.setSelectedRange(b),this.clearSelection()}},f.prototype.deleteForward=function(a){a.preventDefault();var b=this.selectedRange();return 0===b.length&&(b.length++,this.setSelectedRange(b)),this.clearSelection()},f.prototype.deleteWordForward=function(a){if(this.hasSelection())return this.deleteForward(a);a.preventDefault();var b=this.selectedRange(),c=this.nextWordBreakAfterIndex(b.start+b.length);this.setSelectedRange({start:b.start,length:c-b.start}),this.clearSelection()},f.prototype.insertTab=function(){},f.prototype.insertBackTab=function(){},f.prototype.hasSelection=function(){return 0!==this.selectedRange().length},f.prototype.lastWordBreakBeforeIndex=function(a){for(var b=this.leftWordBreakIndexes(),c=b[0],d=0,e=b.length;e>d;d++){var f=b[d];if(!(a>f))break;c=f}return c},f.prototype.leftWordBreakIndexes=function(){for(var a=[],b=this.text(),c=0,e=b.length;e>c;c++)d(b,c)&&a.push(c);return a},f.prototype.nextWordBreakAfterIndex=function(a){for(var b=this.rightWordBreakIndexes().reverse(),c=b[0],d=0,e=b.length;e>d;d++){var f=b[d];if(!(f>a))break;c=f}return c},f.prototype.rightWordBreakIndexes=function(){for(var a=[],b=this.text(),c=0,d=b.length;d>=c;c++)e(b,c)&&a.push(c+1);return a},f.prototype.clearSelection=function(){this.replaceSelection("")},f.prototype.replaceSelection=function(a){var b=this.selectedRange(),c=b.start+b.length,d=this.text();d=d.substring(0,b.start)+a+d.substring(c),b.length=a.length,this.setText(d),this.setSelectedRangeWithAffinity(b,n.NONE)},f.prototype.selectAll=function(a){a.preventDefault(),this.setSelectedRangeWithAffinity({start:0,length:this.text().length},n.NONE)},f.prototype.readSelectionFromPasteboard=function(a){var b,c;c=a.getData("Text"),this.replaceSelection(c),b=this.selectedRange(),b.start+=b.length,b.length=0,this.setSelectedRange(b)},f.prototype.keyDown=function(a){this._didEndEditingButKeptFocus&&(this._textFieldDidBeginEditing(),this._didEndEditingButKeptFocus=!1);var b=this._bindings.actionForEvent(a);if(b)switch(b){case"undo":case"redo":this[b](a);break;default:var c=this;this.rollbackInvalidChanges(function(){return c[b](a)})}},f.prototype.keyPress=function(a){var b=a.keyCode;if(!a.metaKey&&!a.ctrlKey&&b!==k.ENTER&&b!==k.TAB&&b!==k.BACKSPACE&&(a.preventDefault(),0!==a.charCode)){var c=this,d=a.charCode||a.keyCode;this.rollbackInvalidChanges(function(){c.insertText(String.fromCharCode(d))})}},f.prototype.keyUp=function(a){var b=this;this.rollbackInvalidChanges(function(){a.keyCode===k.TAB&&b.selectAll(a)})},f.prototype.paste=function(a){var b=this;a.preventDefault(),this.rollbackInvalidChanges(function(){b.readSelectionFromPasteboard(a.originalEvent.clipboardData)})},f.prototype.rollbackInvalidChanges=function(a){var b=null,c=null,d=g.build(this,function(){b=a()}),e=function(a){c=a};if(d.hasChanges()){var f=this.formatter();if(f&&"function"==typeof f.isChangeValid){if(!f.isChangeValid(d,e)){var h=this.delegate();return h&&"function"==typeof h.textFieldDidFailToValidateChange&&h.textFieldDidFailToValidateChange(this,d,c),this.setText(d.current.text),this.setSelectedRange(d.current.selectedRange),b}d.recomputeDiff(),this.setText(d.proposed.text),this.setSelectedRange(d.proposed.selectedRange)}(d.inserted.text.length||d.deleted.text.length)&&(this.undoManager().proxyFor(this)._applyChangeFromUndoManager(d),this._textDidChange())}return b},f.prototype.click=function(){this.selectionAffinity=n.NONE},f.prototype.on=function(){this.element.on.apply(this.element,arguments)},f.prototype.off=function(){this.element.off.apply(this.element,arguments)},f.prototype.text=function(){return this.element.val()},f.prototype.setText=function(a){this.element.val(a)},f.prototype.value=function(){var a=this,b=this.text(),c=this.delegate(),d=this.formatter();return d?d.parse(b,function(d){c&&"function"==typeof c.textFieldDidFailToParseString&&c.textFieldDidFailToParseString(a,b,d)}):b},f.prototype.setValue=function(a){return this._formatter&&(a=this._formatter.format(a)),this.setText(""+a),this.element.trigger("change")},f.prototype.formatter=function(){if(!this._formatter){this._formatter=new h;var a=this.element.attr("maxlength");void 0!==a&&null!==a&&(this._formatter.maximumLength=parseInt(a,10))}return this._formatter},f.prototype.setFormatter=function(a){var b=this.value();this._formatter=a,this.setValue(b)},f.prototype.selectedRange=function(){var a=this.element.caret();return{start:a.start,length:a.end-a.start}},f.prototype.setSelectedRange=function(a){return this.setSelectedRangeWithAffinity(a,this.selectionAffinity)},f.prototype.setSelectedRangeWithAffinity=function(a,b){var c=0,d=this.text().length,e={start:Math.max(c,Math.min(d,a.start)),end:Math.max(c,Math.min(d,a.start+a.length))};this.element.caret(e),this.selectionAffinity=0===a.length?n.NONE:b},f.prototype.selectionAnchor=function(){var a=this.selectedRange();switch(this.selectionAffinity){case n.UPSTREAM:return a.start+a.length;case n.DOWNSTREAM:return a.start;default:return null}},f.prototype.undo=function(a){this.undoManager().canUndo()&&this.undoManager().undo(),a.preventDefault()},f.prototype.redo=function(a){this.undoManager().canRedo()&&this.undoManager().redo(),a.preventDefault()},f.prototype.undoManager=function(){return this._undoManager||(this._undoManager=new i)},f.prototype.allowsUndo=function(){return this._allowsUndo},f.prototype.setAllowsUndo=function(a){this._allowsUndo=a},f.prototype._applyChangeFromUndoManager=function(a){this.undoManager().proxyFor(this)._applyChangeFromUndoManager(a),this.undoManager().isUndoing()?(this.setText(a.current.text),this.setSelectedRange(a.current.selectedRange)):(this.setText(a.proposed.text),this.setSelectedRange(a.proposed.selectedRange)),this._textDidChange()},f.prototype._enabled=!0,f.prototype.isEnabled=function(){return this._enabled},f.prototype.setEnabled=function(a){this._enabled=a,this._syncPlaceholder()},f.prototype.hasFocus=function(){return this.element.get(0).ownerDocument.activeElement===this.element.get(0)},f.prototype._focusin=function(){return this._textFieldDidBeginEditing(),this._syncPlaceholder()},f.prototype._focusout=function(){return this._textFieldDidEndEditing(),this._syncPlaceholder()},f.prototype._didEndEditingButKeptFocus=!1,f.prototype.becomeFirstResponder=function(){var a=this;this.element.focus(),this.rollbackInvalidChanges(function(){a.element.select(),a._syncPlaceholder()})},f.prototype.resignFirstResponder=function(a){void 0!==a&&null!==a&&a.preventDefault(),this.element.blur(),this._syncPlaceholder()},f.prototype._placeholder=null,f.prototype._disabledPlaceholder=null,f.prototype._focusedPlaceholder=null,f.prototype._unfocusedPlaceholder=null,f.prototype.disabledPlaceholder=function(){return this._disabledPlaceholder},f.prototype.setDisabledPlaceholder=function(a){this._disabledPlaceholder=a,this._syncPlaceholder()},f.prototype.focusedPlaceholder=function(){return this._focusedPlaceholder},f.prototype.setFocusedPlaceholder=function(a){this._focusedPlaceholder=a,this._syncPlaceholder()},f.prototype.unfocusedPlaceholder=function(){return this._unfocusedPlaceholder},f.prototype.setUnfocusedPlaceholder=function(a){this._unfocusedPlaceholder=a,this._syncPlaceholder()},f.prototype.placeholder=function(){return this._placeholder},f.prototype.setPlaceholder=function(a){this._placeholder=a,this.element.attr("placeholder",this._placeholder)},f.prototype._syncPlaceholder=function(){if(this._enabled)if(this.hasFocus()){var a=this._focusedPlaceholder;void 0!==a&&null!==a&&this.setPlaceholder(a)}else{var b=this._unfocusedPlaceholder;void 0!==b&&null!==b&&this.setPlaceholder(b)}else{var c=this._disabledPlaceholder;void 0!==c&&null!==c&&this.setPlaceholder(c)}},f.prototype._buildKeybindings=function(){var a=this.element.get(0).ownerDocument,b=a.defaultView||a.parentWindow,c=b.navigator.userAgent,d=/^Mozilla\/[\d\.]+ \(Macintosh/.test(c);this._bindings=l(d?"OSX":"Default")},f.prototype.inspect=function(){return'#<TextField text="'+this.text()+'">'},g.prototype.field=null,g.prototype.current=null,g.prototype.proposed=null,g.build=function(a,b){var c=new this(a);return c.current={text:a.text(),selectedRange:a.selectedRange()},b(),c.proposed={text:a.text(),selectedRange:a.selectedRange()},c.recomputeDiff(),c},g.prototype.hasChanges=function(){return this.recomputeDiff(),this.current.text!==this.proposed.text||this.current.selectedRange.start!==this.proposed.selectedRange.start||this.current.selectedRange.length!==this.proposed.selectedRange.length},g.prototype.recomputeDiff=function(){if(this.proposed.text!==this.current.text){var a,b=this.current.text,c=this.proposed.text,d=0,e=0,f=Math.min(b.length,c.length);for(a=0;f>a&&c[a]===b[a];a++)d=a+1;for(a=0;f-d>a&&c[c.length-1-a]===b[b.length-1-a];a++)e=a+1;var g={start:d,end:c.length-e},h={start:d,end:b.length-e};g.text=c.substring(g.start,g.end),h.text=b.substring(h.start,h.end),this.inserted=g,this.deleted=h}else this.inserted={start:this.proposed.selectedRange.start,end:this.proposed.selectedRange.start+this.proposed.selectedRange.length,text:""},this.deleted={start:this.current.selectedRange.start,end:this.current.selectedRange.start+this.current.selectedRange.length,text:""};return null},b.exports=f},{"./formatter":9,"./undo_manager":14,"./keybindings":17,"./utils":16}],15:[function(a,b){function c(a){if(null===a||void 0===a)return null;a=a.toString();var b=parseInt(a.slice(0,2),10),c=parseInt(a.slice(0,6),10),d=parseInt(a.slice(0,3),10);return"4"===a[0]?j:"6011"===a.slice(0,4)||65===b||d>=664&&649>=d||c>=622126&&622925>=c?g:"2131"===a.slice(0,4)||"1800"===a.slice(0,4)||35===b?h:b>=51&&55>=b?i:34===b||37===b?f:void 0}function d(a){for(var b=0,c=!0,d=a.length-1;d>=0;d--)digit=parseInt(a.charAt(d),10),b+=(c=!c)?Math.floor(2*digit/10)+Math.floor(2*digit%10):digit;
return b%10===0}function e(a){switch(c(a)){case j:return 13===a.length||16===a.length;case g:case i:return 16===a.length;case h:return 15===a.length||16===a.length;case f:return 15===a.length;default:return!1}}var f="amex",g="discover",h="jcb",i="mastercard",j="visa";b.exports={determineCardType:c,luhnCheck:d,validCardLength:e,AMEX:f,DISCOVER:g,JCB:h,MASTERCARD:i,VISA:j}},{}],16:[function(a,b){function c(a){return j.test(a)}function d(a,b){return b.slice(0,a.length)===a}function e(a,b){return b.slice(b.length-a.length)===a}function f(a,b){for(var c=""+b;c.length<a;)c="0"+c;return c}function g(a){return f(2,a)}function h(a,b){return"function"==typeof a.bind?a.bind(b):function(){return a.apply(b,arguments)}}var i,j=/^\d*$/,k=/(^\s+|\s+$)/;i="function"==typeof"".trim?function(a){return a.trim()}:function(a){return a.replace(k,"")},b.exports={isDigits:c,startsWith:d,endsWith:e,trim:i,zpad:f,zpad2:g,bind:h}},{}],17:[function(a,b){function c(a){var b="OSX"===a,c=b?u:t;return x[a]||(x[a]=d(a,function(a){a(f,c,"selectAll"),a(k,null,"moveLeft"),a(k,v,"moveWordLeft"),a(k,w,"moveLeftAndModifySelection"),a(k,v|w,"moveWordLeftAndModifySelection"),a(l,null,"moveRight"),a(l,v,"moveWordRight"),a(l,w,"moveRightAndModifySelection"),a(l,v|w,"moveWordRightAndModifySelection"),a(m,null,"moveUp"),a(m,v,"moveToBeginningOfParagraph"),a(m,w,"moveUpAndModifySelection"),a(m,v|w,"moveParagraphBackwardAndModifySelection"),a(n,null,"moveDown"),a(n,v,"moveToEndOfParagraph"),a(n,w,"moveDownAndModifySelection"),a(n,v|w,"moveParagraphForwardAndModifySelection"),a(o,null,"deleteBackward"),a(o,w,"deleteBackward"),a(o,v,"deleteWordBackward"),a(o,v|w,"deleteWordBackward"),a(o,c,"deleteBackwardToBeginningOfLine"),a(o,c|w,"deleteBackwardToBeginningOfLine"),a(p,null,"deleteForward"),a(p,v,"deleteWordForward"),a(q,null,"insertTab"),a(q,w,"insertBackTab"),a(r,null,"insertNewline"),a(h,c,"undo"),b?(a(k,u,"moveToBeginningOfLine"),a(k,u|w,"moveToBeginningOfLineAndModifySelection"),a(l,u,"moveToEndOfLine"),a(l,u|w,"moveToEndOfLineAndModifySelection"),a(m,u,"moveToBeginningOfDocument"),a(m,u|w,"moveToBeginningOfDocumentAndModifySelection"),a(n,u,"moveToEndOfDocument"),a(n,u|w,"moveToEndOfDocumentAndModifySelection"),a(o,t,"deleteBackwardByDecomposingPreviousCharacter"),a(o,t|w,"deleteBackwardByDecomposingPreviousCharacter"),a(h,u|w,"redo")):a(g,t,"redo")})),x[a]}function d(a,b){var c=new e(a);return b(function(){return c.bind.apply(c,arguments)}),c}function e(a){this.platform=a,this.bindings={}}var f=65,g=89,h=90,i=48,j=57,k=37,l=39,m=38,n=40,o=8,p=46,q=9,r=13,s={A:f,Y:g,Z:h,ZERO:i,NINE:j,LEFT:k,RIGHT:l,UP:m,DOWN:n,BACKSPACE:o,DELETE:p,TAB:q,ENTER:r,isDigit:function(a){return a>=i&&j>=a},isDirectional:function(a){return a===k||a===l||a===m||a===n}},t=1,u=2,v=4,w=8,x={};e.prototype.platform=null,e.prototype.bindings=null,e.prototype.bind=function(a,b,c){this.bindings[a]||(this.bindings[a]={}),this.bindings[a][b||0]=c},e.prototype.actionForEvent=function(a){var b=this.bindings[a.keyCode];if(b){var c=0;return a.altKey&&(c|=v),a.ctrlKey&&(c|=t),a.metaKey&&(c|=u),a.shiftKey&&(c|=w),b[c]}},b.exports={KEYS:s,keyBindingsForPlatform:c}},{}],10:[function(a,b){(function(){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w=[].slice,x={}.hasOwnProperty,y=function(a,b){function c(){this.constructor=a}for(var d in b)x.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};g=a("./formatter"),v=a("./utils"),p=v.isDigits,r=v.startsWith,n=v.endsWith,t=v.trim,u=v.zpad,s=a("stround"),i=0,c=1,k=2,f="en-US",e="US",q=function(a){var b,c,d;return b=a.match(/^([a-z][a-z])(?:[-_]([a-z][a-z]))?$/i),{lang:null!=b?null!=(c=b[1])?c.toLowerCase():void 0:void 0,country:null!=b?null!=(d=b[2])?d.toUpperCase():void 0:void 0}},o=function(){var a,b,c,d;return c=arguments[0],b=arguments[1],a=3<=arguments.length?w.call(arguments,2):[],d=null!=c?c[b]:void 0,"function"==typeof d&&(d=d.apply(null,a)),d},j=function(a){function b(){this._locale="en",this.setNumberStyle(i)}return y(b,a),b.prototype._allowsFloats=null,b.prototype._alwaysShowsDecimalSeparator=null,b.prototype._countryCode=null,b.prototype._currencyCode=null,b.prototype._exponent=null,b.prototype._groupingSeparator=null,b.prototype._groupingSize=null,b.prototype._lenient=!1,b.prototype._locale=null,b.prototype._internationalCurrencySymbol=null,b.prototype._maximumFractionDigits=null,b.prototype._minimumFractionDigits=null,b.prototype._maximumIntegerDigits=null,b.prototype._minimumIntegerDigits=null,b.prototype._maximum=null,b.prototype._minimum=null,b.prototype._notANumberSymbol=null,b.prototype._nullSymbol=null,b.prototype._numberStyle=null,b.prototype._roundingMode=null,b.prototype._usesGroupingSeparator=null,b.prototype._zeroSymbol=null,b.prototype.allowsFloats=function(){return this._get("allowsFloats")},b.prototype.setAllowsFloats=function(a){return this._allowsFloats=a,this},b.prototype.alwaysShowsDecimalSeparator=function(){return this._get("alwaysShowsDecimalSeparator")},b.prototype.setAlwaysShowsDecimalSeparator=function(a){return this._alwaysShowsDecimalSeparator=a,this},b.prototype.countryCode=function(){return this._countryCode||e},b.prototype.setCountryCode=function(a){return this._countryCode=a,this},b.prototype.currencyCode=function(){return this._get("currencyCode")},b.prototype.setCurrencyCode=function(a){return this._currencyCode=a,this},b.prototype.currencySymbol=function(){return this._shouldShowNativeCurrencySymbol()?this._get("currencySymbol"):this._get("internationalCurrencySymbol")},b.prototype.setCurrencySymbol=function(a){return this._currencySymbol=a,this},b.prototype._shouldShowNativeCurrencySymbol=function(){var a,b;return a=this._regionDefaults().currencyCode,a=null!=(b="function"==typeof a?a():void 0)?b:a,this.currencyCode()===a},b.prototype.decimalSeparator=function(){return this._get("decimalSeparator")},b.prototype.setDecimalSeparator=function(a){return this._decimalSeparator=a,this},b.prototype.groupingSeparator=function(){return this._get("groupingSeparator")},b.prototype.setGroupingSeparator=function(a){return this._groupingSeparator=a,this},b.prototype.groupingSize=function(){return this._get("groupingSize")},b.prototype.setGroupingSize=function(a){return this._groupingSize=a,this},b.prototype.internationalCurrencySymbol=function(){return this._get("internationalCurrencySymbol")},b.prototype.setInternationalCurrencySymbol=function(a){return this._internationalCurrencySymbol=a,this},b.prototype.isLenient=function(){return this._lenient},b.prototype.setLenient=function(a){return this._lenient=a,this},b.prototype.locale=function(){return this._locale||f},b.prototype.setLocale=function(a){return this._locale=a,this},b.prototype.maximum=function(){return this._maximum},b.prototype.setMaximum=function(a){return this._maximum=a,this},b.prototype.minimum=function(){return this._minimum},b.prototype.setMinimum=function(a){return this._minimum=a,this},b.prototype.maximumFractionDigits=function(){return this._get("maximumFractionDigits")},b.prototype.setMaximumFractionDigits=function(a){return this._maximumFractionDigits=a,a<this.minimumFractionDigits()&&this.setMinimumFractionDigits(a),this},b.prototype.minimumFractionDigits=function(){return this._get("minimumFractionDigits")},b.prototype.setMinimumFractionDigits=function(a){return this._minimumFractionDigits=a,a>this.maximumFractionDigits()&&this.setMaximumFractionDigits(a),this},b.prototype.maximumIntegerDigits=function(){return this._get("maximumIntegerDigits")},b.prototype.setMaximumIntegerDigits=function(a){return this._maximumIntegerDigits=a,a<this.minimumIntegerDigits()&&this.setMinimumIntegerDigits(a),this},b.prototype.minimumIntegerDigits=function(){return this._get("minimumIntegerDigits")},b.prototype.setMinimumIntegerDigits=function(a){return this._minimumIntegerDigits=a,a>this.maximumIntegerDigits()&&this.setMaximumIntegerDigits(a),this},b.prototype.exponent=function(){return this._get("exponent")},b.prototype.setExponent=function(a){return this._exponent=a,this},b.prototype.negativeInfinitySymbol=function(){return this._get("negativeInfinitySymbol")},b.prototype.setNegativeInfinitySymbol=function(a){return this._negativeInfinitySymbol=a,this},b.prototype.negativePrefix=function(){return this._get("negativePrefix")},b.prototype.setNegativePrefix=function(a){return this._negativePrefix=a,this},b.prototype.negativeSuffix=function(){return this._get("negativeSuffix")},b.prototype.setNegativeSuffix=function(a){return this._negativeSuffix=a,this},b.prototype.notANumberSymbol=function(){return this._get("notANumberSymbol")},b.prototype.setNotANumberSymbol=function(a){return this._notANumberSymbol=a,this},b.prototype.nullSymbol=function(){return this._get("nullSymbol")},b.prototype.setNullSymbol=function(a){return this._nullSymbol=a,this},b.prototype.numberStyle=function(){return this._numberStyle},b.prototype.setNumberStyle=function(a){switch(this._numberStyle=a,this._numberStyle){case i:this._styleDefaults=m.NONE;break;case k:this._styleDefaults=m.PERCENT;break;case c:this._styleDefaults=m.CURRENCY;break;default:this._styleDefaults=null}return this},b.prototype.percentSymbol=function(){return this._get("percentSymbol")},b.prototype.setPercentSymbol=function(a){return this._percentSymbol=a,this},b.prototype.positiveInfinitySymbol=function(){return this._get("positiveInfinitySymbol")},b.prototype.setPositiveInfinitySymbol=function(a){return this._positiveInfinitySymbol=a,this},b.prototype.positivePrefix=function(){return this._get("positivePrefix")},b.prototype.setPositivePrefix=function(a){return this._positivePrefix=a,this},b.prototype.positiveSuffix=function(){return this._get("positiveSuffix")},b.prototype.setPositiveSuffix=function(a){return this._positiveSuffix=a,this},b.prototype.roundingMode=function(){return this._get("roundingMode")},b.prototype.setRoundingMode=function(a){return this._roundingMode=a,this},b.prototype.usesGroupingSeparator=function(){return this._get("usesGroupingSeparator")},b.prototype.setUsesGroupingSeparator=function(a){return this._usesGroupingSeparator=a,this},b.prototype.zeroSymbol=function(){return this._get("zeroSymbol")},b.prototype.setZeroSymbol=function(a){return this._zeroSymbol=a,this},b.prototype._get=function(a){var b,c,d,e;return e=this["_"+a],null!=e?e:(d=this._styleDefaults,b=this._localeDefaults(),c=this._regionDefaults(),e=o(d,a,this,b),null!=e?e:(e=o(b,a,this,d),null!=e?e:(e=o(c,a,this,d),null!=e?e:(e=o(this._currencyDefaults(),a,this,b),null!=e?e:null))))},b.prototype.format=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,t,u,v,w,x,y,z,A;if(""===a)return"";if(null!=(v=this.zeroSymbol())&&0===a)return v;if(null!=(o=this.nullSymbol())&&null===a)return o;if(null!=(n=this.notANumberSymbol())&&isNaN(a))return n;if(null!=(p=this.positiveInfinitySymbol())&&1/0===a)return p;if(null!=(m=this.negativeInfinitySymbol())&&a===-1/0)return m;if(f=null,d=null,t=null,l=0>a,x=(""+Math.abs(a)).split("."),f=x[0],d=x[1],d||(d=""),null!=(c=this.exponent()))for(y=s.shift([l,f,d],c),l=y[0],f=y[1],d=y[2];"0"===f[0];)f=f.slice(1);for(h=this.maximumFractionDigits(),d.length>h&&(u=""+f+"."+d,r=this._round(l?"-"+u:u),"-"===r[0]&&(r=r.slice(1)),z=r.split("."),f=z[0],d=z[1],d||(d="")),j=this.minimumFractionDigits();d.length<j;)d+="0";for(k=this.minimumIntegerDigits();f.length<k;)f="0"+f;for(j=this.minimumFractionDigits();d.length>j&&"0"===d.slice(-1);)d=d.slice(0,-1);if(i=this.maximumIntegerDigits(),null!=i&&f.length>i&&(f=f.slice(-i)),(d.length>0||this.alwaysShowsDecimalSeparator())&&(d=this.decimalSeparator()+d),this.usesGroupingSeparator()){for(g="",b=0,e=w=A=f.length-1;0>=A?0>=w:w>=0;e=0>=A?++w:--w)b>0&&b%this.groupingSize()===0&&(g=this.groupingSeparator()+g),g=f[e]+g,b++;f=g}return q=f+d,q=l?this.negativePrefix()+q+this.negativeSuffix():this.positivePrefix()+q+this.positiveSuffix()},b.prototype._round=function(a){return s.round(a,this.maximumFractionDigits(),this.roundingMode())},b.prototype.parse=function(a,b){var c,d,e,f,g,h,i,j,k,l;if(j=this.positivePrefix(),h=this.negativePrefix(),k=this.positiveSuffix(),i=this.negativeSuffix(),this.isLenient()&&(a=a.replace(/\s/g,""),j=t(j),h=t(h),k=t(k),i=t(i)),null!=this.zeroSymbol()&&a===this.zeroSymbol())l=0;else if(null!=this.nullSymbol()&&a===this.nullSymbol())l=null;else if(null!=this.notANumberSymbol()&&a===this.notANumberSymbol())l=0/0;else if(null!=this.positiveInfinitySymbol()&&a===this.positiveInfinitySymbol())l=1/0;else if(null!=this.negativeInfinitySymbol()&&a===this.negativeInfinitySymbol())l=-1/0;else if(null==l)if(c=r(h,a),d=n(i,a),c&&(this.isLenient()||d))g=a.slice(h.length),d&&(g=g.slice(0,g.length-i.length)),l=this._parseAbsoluteValue(g,b),null!=l&&(l*=-1);else{if(e=r(j,a),f=n(k,a),!(this.isLenient()||e&&f))return"function"==typeof b&&b("number-formatter.invalid-format"),null;g=a,e&&(g=g.slice(j.length)),f&&(g=g.slice(0,g.length-k.length)),l=this._parseAbsoluteValue(g,b)}if(null!=l){if(null!=this._minimum&&l<this._minimum)return"function"==typeof b&&b("number-formatter.out-of-bounds.below-minimum"),null;if(null!=this._maximum&&l>this._maximum)return"function"==typeof b&&b("number-formatter.out-of-bounds.above-maximum"),null}return l},b.prototype._parseAbsoluteValue=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o;if(0===a.length)return"function"==typeof b&&b("number-formatter.invalid-format"),null;if(k=a.split(this.decimalSeparator()),k.length>2)return"function"==typeof b&&b("number-formatter.invalid-format"),null;if(h=k[0],d=k[1]||"",this.usesGroupingSeparator()){if(g=this.groupingSize(),f=h.split(this.groupingSeparator()),!this.isLenient()&&f.length>1){if(f[0].length>g)return"function"==typeof b&&b("number-formatter.invalid-format.grouping-size"),null;for(n=f.slice(1),l=0,m=n.length;m>l;l++)if(e=n[l],e.length!==g)return"function"==typeof b&&b("number-formatter.invalid-format.grouping-size"),null}h=f.join("")}return p(h)&&p(d)?(null!=(c=this.exponent())&&(o=s.shift([i,h,d],-c),i=o[0],h=o[1],d=o[2]),j=Number(h)+Number("."+(d||"0")),this.allowsFloats()||j===~~j?j:("function"==typeof b&&b("number-formatter.floats-not-allowed"),null)):("function"==typeof b&&b("number-formatter.invalid-format"),null)},b.prototype._currencyDefaults=function(){var a,b,c,e,f;b={},e=d["default"];for(a in e)x.call(e,a)&&(c=e[a],b[a]=c);f=d[this.currencyCode()];for(a in f)x.call(f,a)&&(c=f[a],b[a]=c);return b},b.prototype._regionDefaults=function(){var a,b,c,d,e;b={},d=l["default"];for(a in d)x.call(d,a)&&(c=d[a],b[a]=c);e=l[this.countryCode()];for(a in e)x.call(e,a)&&(c=e[a],b[a]=c);return b},b.prototype._localeDefaults=function(){var a,b,c,d,e,f,g,i,j,k;for(f=this.locale(),a=this.countryCode(),e=q(f).lang,g={},b=[l["default"],h["default"],l[a],h[e],h[f]],j=0,k=b.length;k>j;j++){c=b[j];for(d in c)x.call(c,d)&&(i=c[d],g[d]=i)}return g},b}(g),j.prototype.stringFromNumber=j.prototype.format,j.prototype.numberFromString=j.prototype.parse,j.prototype.minusSign=j.prototype.negativePrefix,j.prototype.setMinusSign=j.prototype.setNegativePrefix,j.prototype.plusSign=j.prototype.positivePrefix,j.prototype.setPlusSign=j.prototype.setPositivePrefix,j.Rounding=s.modes,j.Style={NONE:i,CURRENCY:c,PERCENT:k},m={NONE:{usesGroupingSeparator:!1,minimumFractionDigits:0,maximumFractionDigits:0,minimumIntegerDigits:0},PERCENT:{usesGroupingSeparator:!1,exponent:2,minimumFractionDigits:0,maximumFractionDigits:0,minimumIntegerDigits:1,positiveSuffix:function(a){return a.percentSymbol()},negativeSuffix:function(a){return a.percentSymbol()}},CURRENCY:{positivePrefix:function(a,b){return o(b,"positiveCurrencyPrefix",a,this)},positiveSuffix:function(a,b){return o(b,"positiveCurrencySuffix",a,this)},negativePrefix:function(a,b){return o(b,"negativeCurrencyPrefix",a,this)},negativeSuffix:function(a,b){return o(b,"negativeCurrencySuffix",a,this)}}},h={"default":{allowsFloats:!0,alwaysShowsDecimalSeparator:!1,decimalSeparator:".",groupingSeparator:",",groupingSize:3,negativeInfinitySymbol:"-âˆž",negativePrefix:"-",negativeSuffix:"",notANumberSymbol:"NaN",nullSymbol:"",percentSymbol:"%",positiveInfinitySymbol:"+âˆž",positivePrefix:"",positiveSuffix:"",roundingMode:j.Rounding.HALF_EVEN,positiveCurrencyPrefix:function(a){return a.currencySymbol()},positiveCurrencySuffix:"",negativeCurrencyPrefix:function(a){return"("+a.currencySymbol()},negativeCurrencySuffix:function(){return")"}},fr:{decimalSeparator:",",groupingSeparator:" ",percentSymbol:" %",positiveCurrencyPrefix:"",positiveCurrencySuffix:function(a){return" "+a.currencySymbol()},negativeCurrencyPrefix:function(){return"("},negativeCurrencySuffix:function(a){return" "+a.currencySymbol()+")"}},ja:{negativeCurrencyPrefix:function(a){return"-"+a.currencySymbol()},negativeCurrencySuffix:""},"en-GB":{negativeCurrencyPrefix:function(a){return"-"+a.currencySymbol()},negativeCurrencySuffix:""}},l={CA:{currencyCode:"CAD"},DE:{currencyCode:"EUR"},ES:{currencyCode:"EUR"},FR:{currencyCode:"EUR"},GB:{currencyCode:"GBP"},JP:{currencyCode:"JPY"},US:{currencyCode:"USD"}},d={"default":{currencySymbol:function(a){return a.currencyCode()},internationalCurrencySymbol:function(a){return a.currencyCode()},minimumFractionDigits:2,maximumFractionDigits:2,minimumIntegerDigits:1,usesGroupingSeparator:!0},CAD:{currencySymbol:"$",internationalCurrencySymbol:"CA$"},EUR:{currencySymbol:"â‚¬"},GBP:{currencySymbol:"Â£",internationalCurrencySymbol:"GBÂ£"},JPY:{currencySymbol:"Â¥",internationalCurrencySymbol:"JPÂ¥",minimumFractionDigits:0,maximumFractionDigits:0},USD:{currencySymbol:"$",internationalCurrencySymbol:"US$"}},b.exports=j}).call(this)},{"./formatter":9,"./utils":16,stround:18}],18:[function(a,b){function c(a){var b=a.length;if(0===b)return"1";var d=parseInt(a[b-1],10);return 9===d?c(a.slice(0,b-1))+"0":a.slice(0,b-1)+(d+1)}function d(a){switch(a){case"NaN":case"Infinity":case"-Infinity":return a}var b=a.match(t);if(!b)throw new Error("cannot round malformed number: "+a);return[void 0!==b[1],b[2],b[3]||""]}function e(a){var b=a[0],c=a[1],d=a[2];if(0===c.length)c="0";else{var e;for(e=0;e<c.length&&"0"===c[e];e++);e!==c.length&&(c=c.slice(e))}return(b?p+c:c)+(d.length?q+d:"")}function f(a,b){"number"==typeof a&&(a=""+a);var c,f=!0;if("string"==typeof a){if(c=d(a),"string"==typeof c)return a}else c=a,f=!1;var g,h=c[0],i=c[1],j=c[2];if(b>0){for(g=j.slice(0,b);g.length<b;)g+="0";i+=g,j=j.slice(b)}else if(0>b){for(;i.length<-b;)i="0"+i;g=i.slice(i.length+b),j=g+j,i=i.slice(0,i.length-g.length)}var k=[h,i,j];return f?e(k):k}function g(a,b,g){if("number"==typeof a&&(a=""+a),"string"!=typeof a)throw new Error("expected a string or number, got: "+a);if(0===a.length)return a;"undefined"==typeof b&&(b=0),"undefined"==typeof g&&(g=l);var j=d(a);if("string"==typeof j)return j;b>0&&(j=f(j,b));var o=j[0],p=j[1],q=j[2];switch(g){case h:case i:case k:for(var r=!1,s=0,t=q.length;t>s;s++)if("0"!==q[s]){r=!0;break}r&&(g===k||o!==(g===h))&&(p=c(p));break;case l:case m:case n:var u=!1,v=parseInt(q[0],10);if(v>5)u=!0;else if(5===v){if(g===n&&(u=!0),!u)for(var s=1,t=q.length;t>s;s++)if("0"!==q[s]){u=!0;break}if(!u&&g===l){var w=parseInt(p[p.length-1],10);u=w%2!==0}}u&&(p=c(p))}return e(f([o,p,""],-b))}var h=0,i=1,j=2,k=3,l=4,m=5,n=6,o={CEILING:h,FLOOR:i,DOWN:j,UP:k,HALF_EVEN:l,HALF_DOWN:m,HALF_UP:n},p="-",q=".",r="-",s="\\.",t=new RegExp("^("+r+")?(\\d*)(?:"+s+"(\\d*))?$");b.exports={round:g,shift:f,modes:o}},{}]},{},[1])(1)});