(function(){function e(t,n){for(var r=[],i=t.split("/"),s,o,u=0;o=i[u++];)".."==o?r.pop():"."!=o&&r.push(o);r=r.join("/"),u=e,o=u.m[n||0],s=o[r+".js"]||o[r+"/index.js"]||o[r];if(o=s.c)s=u.m[n=o][t=s.m];return s.exports||s(s,s.exports={},function(e){return u("."!=e.charAt(0)?e:t+"/../"+e,n)}),s.exports}e.m=[],e.m[0]={"adaptive_card_formatter.js":function(e,t,n){(function(){var t,r,i,s,o,u;i=n("./amex_card_formatter"),s=n("./default_card_formatter"),u=n("./card_utils"),o=u.determineCardType,t=u.AMEX,r=function(){function e(){this.amexCardFormatter=new i,this.defaultCardFormatter=new s,this.formatter=this.defaultCardFormatter}return e.prototype.format=function(e){return this.formatter.format(e)},e.prototype.parse=function(e,t){return this.formatter.parse(e,t)},e.prototype.isChangeValid=function(e){return o(e.proposed.text.replace(/[^\d]+/g,""))===t?this.formatter=this.amexCardFormatter:this.formatter=this.defaultCardFormatter,this.formatter.isChangeValid(e)},e}(),e.exports=r}).call(this)},"amex_card_formatter.js":function(e,t,n){(function(){var t,r,i={}.hasOwnProperty,s=function(e,t){function r(){this.constructor=e}for(var n in t)i.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=n("./default_card_formatter"),t=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.maximumLength=17,t.prototype.hasDelimiterAtIndex=function(e){return e===4||e===11},t}(r),e.exports=t}).call(this)},"card_text_field.js":function(e,t,n){(function(){var t,r,i,s,o={}.hasOwnProperty,u=function(e,t){function r(){this.constructor=e}for(var n in t)o.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};i=n("./text_field"),t=n("./adaptive_card_formatter"),s=n("./card_utils").determineCardType,r=function(e){function n(e){n.__super__.constructor.call(this,e),this.setFormatter(new t)}return u(n,e),n.prototype.cardType=function(){return s(this.value())},n}(i),e.exports=r}).call(this)},"card_utils.js":function(e,t,n){(function(){var t,n,r,i,s,o,u;t="amex",n="discover",r="mastercard",i="visa",s=function(e){var s,o,u;if(e==null)return null;e=e.toString(),s=parseInt(e.slice(0,2),10),u=parseInt(e.slice(0,6),10),o=parseInt(e.slice(0,3),10);if(e[0]==="4")return i;if(e.slice(0,4)==="6011"||s===65||o>=664&&o<=649||u>=622126&&u<=622925)return n;if(s>=51&&s<=55)return r;if(s===34||s===37)return t},o=function(e){var t,n,r,i,s,o;i=0,n=!0;for(r=s=o=e.length-1;o<=0?s<=0:s>=0;r=o<=0?++s:--s){if(e.charAt(r)===" ")continue;t=parseInt(e.charAt(r),10),i+=(n=!n)?Math.floor(t*2/10)+Math.floor(t*2%10):t}return i%10===0},u=function(e){var o;switch(s(e)){case i:return(o=e.length)===13||o===16;case n:case r:return e.length===16;case t:return e.length===15;default:return!1}},e.exports={determineCardType:s,luhnCheck:o,validCardLength:u,AMEX:t,DISCOVER:n,MASTERCARD:r,VISA:i}}).call(this)},"default_card_formatter.js":function(e,t,n){(function(){var t,r,i,s,o,u={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=n("./delimited_text_formatter"),o=n("./card_utils"),s=o.validCardLength,i=o.luhnCheck,t=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.delimiter=" ",t.prototype.maximumLength=19,t.prototype.hasDelimiterAtIndex=function(e){return e===4||e===9||e===14},t.prototype.parse=function(e,n){var r;return r=this._valueFromText(e),s(r)||typeof n=="function"&&n("card-formatter.number-too-short"),i(r)||typeof n=="function"&&n("card-formatter.invalid-number"),t.__super__.parse.call(this,e,n)},t.prototype._valueFromText=function(e){return t.__super__._valueFromText.call(this,(e!=null?e:"").replace(/[^\d]/g,""))},t}(r),e.exports=t}).call(this)},"delimited_text_formatter.js":function(e,t,n){(function(){var t,r,i={}.hasOwnProperty,s=function(e,t){function r(){this.constructor=e}for(var n in t)i.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},o=[].slice;r=n("./formatter"),t=function(e){function t(e){var t;e==null&&(e=this.delimiter),this.delimiter=e;if(((t=this.delimiter)!=null?t.length:void 0)!==1)throw new Error("delimiter must have just one character")}return s(t,e),t.prototype.delimiter=null,t.prototype.format=function(e){return this._textFromValue(e)},t.prototype._textFromValue=function(e){var t,n,r,i;if(!e)return"";n="";for(r=0,i=e.length;r<i;r++)t=e[r],this.hasDelimiterAtIndex(n.length)&&(n+=this.delimiter),n+=t,this.hasDelimiterAtIndex(n.length)&&(n+=this.delimiter);return n},t.prototype.parse=function(e,t){return this._valueFromText(e)},t.prototype._valueFromText=function(e){var t;return e?function(){var n,r,i;i=[];for(n=0,r=e.length;n<r;n++)t=e[n],t!==this.delimiter&&i.push(t);return i}.call(this).join(""):""},t.prototype.isChangeValid=function(e,n){var r,i,s,u,a,f,l;return t.__super__.isChangeValid.call(this,e,n)?(u=e.proposed.text,e.deleted.text===this.delimiter&&(u=u.substring(0,e.deleted.start-1)+u.substring(e.deleted.end-1)),a=e.proposed.selectedRange,i=a.length!==0,f=a.start<e.current.selectedRange.start,r=a.start+a.length<e.current.selectedRange.start+e.current.selectedRange.length,this.hasDelimiterAtIndex(a.start)&&(f?(a.start--,a.length++):(a.start++,a.length--)),i?this.hasDelimiterAtIndex(a.start+a.length-1)&&(f||r?a.length--:a.length++):a.length=0,s=!0,l=this._valueFromText(u,function(){var e;return e=1<=arguments.length?o.call(arguments,0):[],s=!1,n.apply(null,e)}),s&&(e.proposed.text=this._textFromValue(l)),s):!1},t}(r),e.exports=t}).call(this)},"expiry_date_formatter.js":function(e,t,n){(function(){var t,r,i,s={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};t=n("./delimited_text_formatter"),i=function(e){var t;t=""+e;while(t.length<2)t="0"+t;return t},r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.delimiter="/",t.prototype.maximumLength=5,t.prototype.hasDelimiterAtIndex=function(e){return e===2},t.prototype.format=function(e){var n,r;return e?(n=e.month,r=e.year,r%=100,t.__super__.format.call(this,i(n)+i(r))):""},t.prototype.parse=function(e,n){var r;return e=t.__super__.parse.call(this,e),(r=e.match(/^(0?[1-9]|1\d)(\d\d)$/))?{month:Number(r[1]),year:Number(r[2])}:(n("expiry-date-formatter.invalid-date"),null)},t.prototype.isChangeValid=function(e,t){var n,r,i;n=e.proposed.text.length<e.current.text.length,i=e.proposed.text;if(n)e.deleted.text===this.delimiter&&(i=i[0]),i==="0"&&(i="");else if(e.inserted.text===this.delimiter&&e.current.text==="1")i="01"+this.delimiter;else{if(e.inserted.text.length>0&&!/^\d$/.test(e.inserted.text))return t("expiry-date-formatter.only-digits-allowed"),!1;/^[2-9]$/.test(i)&&(i="0"+i);if(/^1[3-9]$/.test(i))return t("expiry-date-formatter.invalid-month"),!1;if(i==="00")return t("expiry-date-formatter.invalid-month"),!1;/^(0[1-9]|1[0-2])$/.test(i)&&(i+=this.delimiter),(r=i.match(/^(\d\d)(.)(\d\d?).*$/))&&r[2]===this.delimiter&&(i=r[1]+this.delimiter+r[3])}return e.proposed.text=i,e.proposed.selectedRange={start:i.length,length:0},!0},t}(t),e.exports=r}).call(this)},"formatter.js":function(e,t,n){(function(){var t;t=function(){function e(){}return e.prototype.maximumLength=null,e.prototype.format=function(e){return e==null&&(e=""),this.maximumLength!=null&&(e=e.substring(0,this.maximumLength)),e},e.prototype.parse=function(e,t){return e==null&&(e=""),this.maximumLength!=null&&(e=e.substring(0,this.maximumLength)),e},e.prototype.isChangeValid=function(e,t){var n,r,i,s,o,u;return u=e.proposed,i=u.selectedRange,s=u.text,this.maximumLength!=null&&s.length>this.maximumLength&&(n=this.maximumLength-(s.length-e.inserted.text.length),r=e.current.text.substring(0,e.current.selectedRange.start),n>0&&(r+=e.inserted.text.substring(0,n)),r+=e.current.text.substring(e.current.selectedRange.start+e.current.selectedRange.length),o=s.length-r.length,e.proposed.text=r,i.start-=o),!0},e}(),e.exports=t}).call(this)},"index.js":function(e,t,n){(function(){var t;t={AdaptiveCardFormatter:n("./adaptive_card_formatter"),AmexCardFormatter:n("./amex_card_formatter"),CardTextField:n("./card_text_field"),DefaultCardFormatter:n("./default_card_formatter"),DelimitedTextFormatter:n("./delimited_text_formatter"),ExpiryDateFormatter:n("./expiry_date_formatter"),Formatter:n("./formatter"),SocialSecurityNumberFormatter:n("./social_security_number_formatter"),TextField:n("./text_field"),UndoManager:n("./undo_manager")},e.exports=t}).call(this)},"social_security_number_formatter.js":function(e,t,n){(function(){var t,r,i={}.hasOwnProperty,s=function(e,t){function r(){this.constructor=e}for(var n in t)i.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};t=n("./delimited_text_formatter"),r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.delimiter="-",t.prototype.maximumLength=11,t.prototype.hasDelimiterAtIndex=function(e){return e===3||e===6},t.prototype.isChangeValid=function(e){return/^\d*$/.test(e.inserted.text)?t.__super__.isChangeValid.call(this,e):!1},t}(t),e.exports=r}).call(this)},"text_field.js":function(e,t,n){(function(){var t,r,i,s,o,u,a,f,l,c,h,p=function(e,t){return function(){return e.apply(t,arguments)}},d=[].slice;o=n("./undo_manager"),r={A:65,Y:89,Z:90,ZERO:48,NINE:57,LEFT:37,RIGHT:39,UP:38,DOWN:40,BACKSPACE:8,DELETE:46,TAB:9,ENTER:13},r.isDigit=function(e){return this.ZERO<=e&&e<=this.NINE},r.isDirectional=function(e){return e===this.LEFT||e===this.RIGHT||e===this.UP||e===this.DOWN},t={UPSTREAM:0,DOWNSTREAM:1,NONE:null},c=function(e){return e&&/^\w$/.test(e)},a=function(e){return"translate("+e+', "ABCDEFGHIJKLMNOPQRSTUVWXYZ", "abcdefghijklmnopqrstuvwxyz")'},u="*["+a("name(.)")+'="input" or '+a("name(.)")+'="select"][not(type="hidden")][not(contains(@class, "field-kit-text-field-interceptor"))]',f=function(e){var t;return t=document.evaluate("following::"+u,e,null,XPathResult.ANY_TYPE,null),t.iterateNext()},l=function(e){var t;return t=document.evaluate("preceding::"+u,e,null,XPathResult.ANY_TYPE,null),t.iterateNext()},h=function(e,t){var n;return(n=e.data("field-kit-text-field"))?n.becomeFirstResponder(t):(typeof e.focus=="function"&&e.focus(),typeof e.select=="function"?e.select():void 0)},i=function(){function e(e){this.element=e,this._blur=p(this._blur,this),this._focus=p(this._focus,this),this.click=p(this.click,this),this.paste=p(this.paste,this),this.keyUp=p(this.keyUp,this),this.keyPress=p(this.keyPress,this),this.keyDown=p(this.keyDown,this),this.afterInterceptorKeyUp=p(this.afterInterceptorKeyUp,this),this.beforeInterceptorKeyUp=p(this.beforeInterceptorKeyUp,this),this._jQuery=this.element.constructor,this.element.on("keydown",this.keyDown),this.element.on("keypress",this.keyPress),this.element.on("keyup",this.keyUp),this.element.on("click",this.click),this.element.on("paste",this.paste),this.element.on("focus",this._focus),this.element.on("blur",this._blur),this.element.data("field-kit-text-field",this),this.createTabInterceptors()}return e.prototype.selectionAffinity=t.NONE,e.prototype._delegate=null,e.prototype.delegate=function(){return this._delegate},e.prototype.setDelegate=function(e){return this._delegate=e,null},e.prototype.createTabInterceptors=function(){var e,t,n,r;return r=this.element.get(0),n=function(){var e;return e=r.ownerDocument.createElement("input"),e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.opacity=0,e.style.zIndex=-9999,e.style.pointerEvents="none",e.className="field-kit-text-field-interceptor",e},t=n(),t.onkeyup=this.beforeInterceptorKeyUp,r.parentNode.insertBefore(t,r),e=n(),e.onkeyup=this.afterInterceptorKeyUp,r.nextSibling?r.parentNode.insertBefore(e,r.nextSibling):r.parentNode.appendChild(e)},e.prototype.beforeInterceptorKeyUp=function(e){var t;if(e.keyCode===r.TAB&&e.shiftKey)if(t=l(e.target))return h(this._jQuery(t))},e.prototype.afterInterceptorKeyUp=function(e){var t;if(e.keyCode===r.TAB&&!e.shiftKey)if(t=f(e.target))return h(this._jQuery(t))},e.prototype.insertText=function(e){var t;return this.hasSelection()&&this.clearSelection(),this.replaceSelection(e),t=this.selectedRange(),t.start+=t.length,t.length=0,this.setSelectedRange(t)},e.prototype.insertNewline=function(e){var t;return(t=this._delegate)!=null?typeof t.textFieldDidEndEditing=="function"?t.textFieldDidEndEditing(this):void 0:void 0},e.prototype.moveUp=function(e){return e.preventDefault(),this.setSelectedRange({start:0,length:0})},e.prototype.moveToBeginningOfParagraph=function(e){return this.moveUp(e)},e.prototype.moveUpAndModifySelection=function(e){var n;e.preventDefault(),n=this.selectedRange();switch(this.selectionAffinity){case t.UPSTREAM:case t.NONE:n.length+=n.start,n.start=0;break;case t.DOWNSTREAM:n.length=n.start,n.start=0}return this.setSelectedRangeWithAffinity(n,t.UPSTREAM)},e.prototype.moveParagraphBackwardAndModifySelection=function(e){var n;e.preventDefault(),n=this.selectedRange();switch(this.selectionAffinity){case t.UPSTREAM:case t.NONE:n.length+=n.start,n.start=0;break;case t.DOWNSTREAM:n.length=0}return this.setSelectedRangeWithAffinity(n,t.UPSTREAM)},e.prototype.moveToBeginningOfDocument=function(e){return this.moveToBeginningOfLine(e)},e.prototype.moveToBeginningOfDocumentAndModifySelection=function(e){var n;return e.preventDefault(),n=this.selectedRange(),n.length+=n.start,n.start=0,this.setSelectedRangeWithAffinity(n,t.UPSTREAM)},e.prototype.moveDown=function(e){var n;return e.preventDefault(),n={start:this.text().length,length:0},this.setSelectedRangeWithAffinity(n,t.NONE)},e.prototype.moveToEndOfParagraph=function(e){return this.moveDown(e)},e.prototype.moveDownAndModifySelection=function(e){var n,r;return e.preventDefault(),r=this.selectedRange(),n=this.text().length,this.selectionAffinity===t.UPSTREAM&&(r.start+=r.length),r.length=n-r.start,this.setSelectedRangeWithAffinity(r,t.DOWNSTREAM)},e.prototype.moveParagraphForwardAndModifySelection=function(e){var n;e.preventDefault(),n=this.selectedRange();switch(this.selectionAffinity){case t.DOWNSTREAM:case t.NONE:n.length=this.text().length-n.start;break;case t.UPSTREAM:n.start+=n.length,n.length=0}return this.setSelectedRangeWithAffinity(n,t.DOWNSTREAM)},e.prototype.moveToEndOfDocument=function(e){return this.moveToEndOfLine(e)},e.prototype.moveToEndOfDocumentAndModifySelection=function(e){var n;return e.preventDefault(),n=this.selectedRange(),n.length=this.text().length-n.start,this.setSelectedRangeWithAffinity(n,t.DOWNSTREAM)},e.prototype.moveLeft=function(e){var n;return e.preventDefault(),n=this.selectedRange(),n.length!==0?n.length=0:n.start--,this.setSelectedRangeWithAffinity(n,t.NONE)},e.prototype.moveLeftAndModifySelection=function(e){var n;e.preventDefault(),n=this.selectedRange();switch(this.selectionAffinity){case t.UPSTREAM:case t.NONE:this.selectionAffinity=t.UPSTREAM,n.start--,n.length++;break;case t.DOWNSTREAM:n.length--}return this.setSelectedRange(n)},e.prototype.moveWordLeft=function(e){var t;return e.preventDefault(),t=this.lastWordBreakBeforeIndex(this.selectedRange().start-1),this.setSelectedRange({start:t,length:0})},e.prototype.moveWordLeftAndModifySelection=function(e){var n,r,i;e.preventDefault(),r=this.selectedRange();switch(this.selectionAffinity){case t.UPSTREAM:case t.NONE:this.selectionAffinity=t.UPSTREAM,i=this.lastWordBreakBeforeIndex(r.start-1),r.length+=r.start-i,r.start=i;break;case t.DOWNSTREAM:n=this.lastWordBreakBeforeIndex(r.start+r.length),n<r.start&&(n=r.start),r.length-=r.start+r.length-n}return this.setSelectedRange(r)},e.prototype.moveToBeginningOfLine=function(e){return e.preventDefault(),this.setSelectedRange({start:0,length:0})},e.prototype.moveToBeginningOfLineAndModifySelection=function(e){var n;return e.preventDefault(),n=this.selectedRange(),n.length+=n.start,n.start=0,this.setSelectedRangeWithAffinity(n,t.UPSTREAM)},e.prototype.moveRight=function(e){var n;return e.preventDefault(),n=this.selectedRange(),n.length!==0?(n.start+=n.length,n.length=0):n.start++,this.setSelectedRangeWithAffinity(n,t.NONE)},e.prototype.moveRightAndModifySelection=function(e){var n;e.preventDefault(),n=this.selectedRange();switch(this.selectionAffinity){case t.UPSTREAM:n.start++,n.length--;break;case t.DOWNSTREAM:case t.NONE:this.selectionAffinity=t.DOWNSTREAM,n.length++}return this.setSelectedRange(n)},e.prototype.moveWordRight=function(e){var t,n;return e.preventDefault(),n=this.selectedRange(),t=this.nextWordBreakAfterIndex(n.start+n.length),this.setSelectedRange({start:t,length:0})},e.prototype.moveWordRightAndModifySelection=function(e){var n,r,i;e.preventDefault(),r=this.selectedRange(),i=r.start,n=r.start+r.length;switch(this.selectionAffinity){case t.UPSTREAM:i=Math.min(this.nextWordBreakAfterIndex(i),n);break;case t.DOWNSTREAM:case t.NONE:this.selectionAffinity=t.DOWNSTREAM,n=this.nextWordBreakAfterIndex(r.start+r.length)}return this.setSelectedRange({start:i,length:n-i})},e.prototype.moveToEndOfLine=function(e){return e.preventDefault(),this.setSelectedRange({start:this.text().length,length:0})},e.prototype.moveToEndOfLineAndModifySelection=function(e){var n;return e.preventDefault(),n=this.selectedRange(),n.length=this.text().length-n.start,this.setSelectedRangeWithAffinity(n,t.DOWNSTREAM)},e.prototype.deleteBackward=function(e){var t;return e.preventDefault(),t=this.selectedRange(),t.length===0&&(t.start--,t.length++,this.setSelectedRange(t)),this.clearSelection()},e.prototype.deleteWordBackward=function(e){var t,n;return this.hasSelection()?this.deleteBackward(e):(e.preventDefault(),t=this.selectedRange(),n=this.lastWordBreakBeforeIndex(t.start),t.length+=t.start-n,t.start=n,this.setSelectedRange(t),this.clearSelection())},e.prototype.deleteBackwardByDecomposingPreviousCharacter=function(e){return this.deleteBackward(e)},e.prototype.deleteBackwardToBeginningOfLine=function(e){var t;return this.hasSelection()?this.deleteBackward(e):(e.preventDefault(),t=this.selectedRange(),t.length=t.start,t.start=0,this.setSelectedRange(t),this.clearSelection())},e.prototype.deleteForward=function(e){var t;return e.preventDefault(),t=this.selectedRange(),t.length===0&&(t.length++,this.setSelectedRange(t)),this.clearSelection()},e.prototype.deleteWordForward=function(e){var t,n;return this.hasSelection()?this.deleteForward(e):(e.preventDefault(),n=this.selectedRange(),t=this.nextWordBreakAfterIndex(n.start+n.length),this.setSelectedRange({start:n.start,length:t-n.start}),this.clearSelection())},e.prototype.insertTab=function(e){},e.prototype.insertBackTab=function(e){},e.prototype.hasSelection=function(){return this.selectedRange().length!==0},e.prototype.lastWordBreakBeforeIndex=function(e){var t,n,r,i,s;t=this.leftWordBreakIndexes(),n=t[0];for(i=0,s=t.length;i<s;i++){r=t[i];if(!(e>r))break;n=r}return n},e.prototype.leftWordBreakIndexes=function(){var e,t,n,r,i;t=[],n=this.text();for(e=r=0,i=n.length-1;0<=i?r<=i:r>=i;e=0<=i?++r:--r)!c(n[e-1])&&c(n[e])&&t.push(e);return t},e.prototype.nextWordBreakAfterIndex=function(e){var t,n,r,i,s;t=this.rightWordBreakIndexes().reverse(),n=t[0];for(i=0,s=t.length;i<s;i++){r=t[i];if(!(e<r))break;n=r}return n},e.prototype.rightWordBreakIndexes=function(){var e,t,n,r,i;t=[],n=this.text();for(e=r=0,i=n.length-1;0<=i?r<=i:r>=i;e=0<=i?++r:--r)c(n[e])&&!c(n[e+1])&&t.push(e+1);return t},e.prototype.clearSelection=function(){return this.replaceSelection("")},e.prototype.replaceSelection=function(e){var n,r,i;return r=this.selectedRange(),n=r.start+r.length,i=this.text(),i=i.substring(0,r.start)+e+i.substring(n),r.length=e.length,this.setText(i),this.setSelectedRangeWithAffinity(r,t.NONE)},e.prototype.selectAll=function(e){return e.preventDefault(),this.setSelectedRangeWithAffinity({start:0,length:this.text().length},t.NONE)},e.prototype.readSelectionFromPasteboard=function(e){var t,n;return n=e.getData("Text"),this.replaceSelection(n),t=this.selectedRange(),t.start+=t.length,t.length=0,this.setSelectedRange(t)},e.prototype.keyDown=function(e){var t,n,i,s,o,u,a=this;i=e.keyCode,s=e.metaKey,n=e.ctrlKey,u=e.shiftKey,t=e.altKey,o=[],t&&o.push("alt"),n&&o.push("ctrl"),s&&o.push("meta"),u&&o.push("shift"),o=o.join("+");if(i!==r.Z||o!=="meta"&&o!=="ctrl"){if(i===r.Z&&o==="meta+shift"||i===r.Y&&o==="ctrl")this.undoManager().canRedo()&&this.undoManager().redo(),e.preventDefault()}else this.undoManager().canUndo()&&this.undoManager().undo(),e.preventDefault();return this.rollbackInvalidChanges(function(){if((s||n)&&i===r.A)a.selectAll(e);else if(i===r.LEFT)switch(o){case"":a.moveLeft(e);break;case"alt":a.moveWordLeft(e);break;case"shift":a.moveLeftAndModifySelection(e);break;case"alt+shift":a.moveWordLeftAndModifySelection(e);break;case"meta":a.moveToBeginningOfLine(e);break;case"meta+shift":a.moveToBeginningOfLineAndModifySelection(e);break;default:throw new Error("unhandled left+"+o)}else if(i===r.RIGHT)switch(o){case"":a.moveRight(e);break;case"alt":a.moveWordRight(e);break;case"shift":a.moveRightAndModifySelection(e);break;case"alt+shift":a.moveWordRightAndModifySelection(e);break;case"meta":a.moveToEndOfLine(e);break;case"meta+shift":a.moveToEndOfLineAndModifySelection(e);break;default:throw new Error("unhandled right+"+o)}else if(i===r.UP)switch(o){case"":a.moveUp(e);break;case"alt":a.moveToBeginningOfParagraph(e);break;case"shift":a.moveUpAndModifySelection(e);break;case"alt+shift":a.moveParagraphBackwardAndModifySelection(e);break;case"meta":a.moveToBeginningOfDocument(e);break;case"meta+shift":a.moveToBeginningOfDocumentAndModifySelection(e);break;default:throw new Error("unhandled up+"+o)}else if(i===r.DOWN)switch(o){case"":a.moveDown(e);break;case"alt":a.moveToEndOfParagraph(e);break;case"shift":a.moveDownAndModifySelection(e);break;case"alt+shift":a.moveParagraphForwardAndModifySelection(e);break;case"meta":a.moveToEndOfDocument(e);break;case"meta+shift":a.moveToEndOfDocumentAndModifySelection(e);break;default:throw new Error("unhandled down+"+o)}else if(i===r.BACKSPACE)switch(o){case"":a.deleteBackward(e);break;case"alt":case"alt+shift":a.deleteWordBackward(e);break;case"ctrl":case"ctrl+shift":a.deleteBackwardByDecomposingPreviousCharacter(e);break;case"meta":case"meta+shift":a.deleteBackwardToBeginningOfLine(e);break;default:throw new Error("unhandled backspace+"+o)}else i===r.DELETE?t?a.deleteWordForward(e):a.deleteForward(e):i===r.TAB?u?a.insertBackTab(e):a.insertTab(e):i===r.ENTER&&a.insertNewline(e);return null})},e.prototype.keyPress=function(e){var t,n=this;if(!e.metaKey&&!e.ctrlKey&&(t=e.keyCode)!==r.ENTER&&t!==r.TAB)return e.preventDefault(),this.rollbackInvalidChanges(function(){return n.insertText(String.fromCharCode(e.charCode))})},e.prototype.keyUp=function(e){var t=this;return this.rollbackInvalidChanges(function(){if(e.keyCode===r.TAB)return t.selectAll(e)})},e.prototype.paste=function(e){var t=this;return e.preventDefault(),this.rollbackInvalidChanges(function(){return t.readSelectionFromPasteboard(e.originalEvent.clipboardData)})},e.prototype.rollbackInvalidChanges=function(e){var t,n,r,i,o,u,a;i=null,r=null,t=s.build(this,function(){return i=e()}),n=function(e){return r=e};if(typeof ((o=this.formatter())!=null?o.isChangeValid:void 0)=="function"){if(!this.formatter().isChangeValid(t,n))return(u=this.delegate())!=null&&typeof u.textFieldDidFailToValidateChange=="function"&&u.textFieldDidFailToValidateChange(this,t,r),this.setText(t.current.text),this.setSelectedRange(t.current.selectedRange),i;t.recomputeDiff(),this.setText(t.proposed.text),this.setSelectedRange(t.proposed.selectedRange)}if(t.inserted.text.length||t.deleted.text.length)this.undoManager().proxyFor(this)._applyChangeFromUndoManager(t),(a=this.delegate())!=null&&typeof a.textDidChange=="function"&&a.textDidChange(this);return i},e.prototype.click=function(e){return this.selectionAffinity=t.NONE},e.prototype.on=function(){var e,t;return e=1<=arguments.length?d.call(arguments,0):[],(t=this.element).on.apply(t,e)},e.prototype.off=function(){var e,t;return e=1<=arguments.length?d.call(arguments,0):[],(t=this.element).off.apply(t,e)},e.prototype.text=function(){return this.element.val()},e.prototype.setText=function(e){return this.element.val(e)},e.prototype.value=function(){var e,t=this;return e=this.element.val(),this._formatter?this._formatter.parse(e,function(n){var r;return(r=t._delegate)!=null?typeof r.textFieldDidFailToParseString=="function"?r.textFieldDidFailToParseString(t,e,n):void 0:void 0}):e},e.prototype.setValue=function(e){return this._formatter&&(e=this._formatter.format(e)),this.element.val(""+e),this.element.trigger("change")},e.prototype.formatter=function(){return this._formatter},e.prototype.setFormatter=function(e){var t;return t=this.value(),this._formatter=e,this.setValue(t)},e.prototype.selectedRange=function(){var e;return e=this.element.caret(),{start:e.start,length:e.end-e.start}},e.prototype.setSelectedRange=function(e){return this.setSelectedRangeWithAffinity(e,this.selectionAffinity)},e.prototype.setSelectedRangeWithAffinity=function(e,n){var r,i,s;return s=0,i=this.text().length,r={start:Math.max(s,Math.min(i,e.start)),end:Math.max(s,Math.min(i,e.start+e.length))},this.element.caret(r),this.selectionAffinity=e.length===0?t.NONE:n},e.prototype.selectionAnchor=function(){var e;e=this.selectedRange();switch(this.selectionAffinity){case t.UPSTREAM:return e.start+e.length;case t.DOWNSTREAM:return e.start;default:return null}},e.prototype.undoManager=function(){return this._undoManager||(this._undoManager=new o)},e.prototype.allowsUndo=function(){return this._allowsUndo},e.prototype.setAllowsUndo=function(e){return this._allowsUndo=e},e.prototype._applyChangeFromUndoManager=function(e){return this.undoManager().proxyFor(this)._applyChangeFromUndoManager(e),this.undoManager().isUndoing()?(this.setText(e.current.text),this.setSelectedRange(e.current.selectedRange)):(this.setText(e.proposed.text),this.setSelectedRange(e.proposed.selectedRange))},e.prototype._enabled=!0,e.prototype.isEnabled=function(){return this._enabled},e.prototype.setEnabled=function(e){return this._enabled=e,this._syncPlaceholder(),null},e.prototype.hasFocus=function(){return this.element.get(0).ownerDocument.activeElement===this.element.get(0)},e.prototype._focus=function(e){return this._syncPlaceholder()},e.prototype._blur=function(e){var t;return(t=this._delegate)!=null&&typeof t.textFieldDidEndEditing=="function"&&t.textFieldDidEndEditing(this),this._syncPlaceholder()},e.prototype.becomeFirstResponder=function(e){var t=this;return this.element.focus(),this.rollbackInvalidChanges(function(){return t.element.select(),t._syncPlaceholder()})},e.prototype.resignFirstResponder=function(e){return e!=null&&e.preventDefault(),this.element.blur(),this._syncPlaceholder()},e.prototype._placeholder=null,e.prototype._disabledPlaceholder=null,e.prototype._focusedPlaceholder=null,e.prototype._unfocusedPlaceholder=null,e.prototype.disabledPlaceholder=function(){return this._disabledPlaceholder},e.prototype.setDisabledPlaceholder=function(e){return this._disabledPlaceholder=e,this._syncPlaceholder(),null},e.prototype.focusedPlaceholder=function(){return this._focusedPlaceholder},e.prototype.setFocusedPlaceholder=function(e){return this._focusedPlaceholder=e,this._syncPlaceholder(),null},e.prototype.unfocusedPlaceholder=function(){return this._unfocusedPlaceholder},e.prototype.setUnfocusedPlaceholder=function(e){return this._unfocusedPlaceholder=e,this._syncPlaceholder(),null},e.prototype.placeholder=function(){return this._placeholder},e.prototype.setPlaceholder=function(e){return this._placeholder=e,this.element.attr("placeholder",this._placeholder)},e.prototype._syncPlaceholder=function(){if(!this._enabled){if(this._disabledPlaceholder!=null)return this.setPlaceholder(this._disabledPlaceholder)}else if(this.hasFocus()){if(this._focusedPlaceholder!=null)return this.setPlaceholder(this._focusedPlaceholder)}else if(this._unfocusedPlaceholder!=null)return this.setPlaceholder(this._unfocusedPlaceholder)},e.prototype.inspect=function(){return"#<TextField text="+this.text()+">"},e}(),s=function(){function e(e){this.field=e}return e.prototype.field=null,e.prototype.current=null,e.prototype.proposed=null,e.build=function(e,t){var n;return n=new this(e),n.current={text:e.text(),selectedRange:e.selectedRange()},t(),n.proposed={text:e.text(),selectedRange:e.selectedRange()},n.recomputeDiff(),n},e.prototype.recomputeDiff=function(){var e,t,n,r,i,s,o,u,a,f,l;if(this.proposed.text!==this.current.text){e=this.current.text,s=this.proposed.text,o=0,u=0,i=Math.min(e.length,s.length);for(n=a=0;0<=i?a<i:a>i;n=0<=i?++a:--a){if(s[n]!==e[n])break;o=n+1}for(n=f=0,l=i-o;0<=l?f<l:f>l;n=0<=l?++f:--f){if(s[s.length-1-n]!==e[e.length-1-n])break;u=n+1}r={start:o,end:s.length-u},t={start:o,end:e.length-u},r.text=s.substring(r.start,r.end),t.text=e.substring(t.start,t.end),this.inserted=r,this.deleted=t}else this.inserted={start:this.proposed.selectedRange.start,end:this.proposed.selectedRange.start+this.proposed.selectedRange.length,text:""},this.deleted={start:this.current.selectedRange.start,end:this.current.selectedRange.start+this.current.selectedRange.length,text:""};return null},e}(),e.exports=i}).call(this)},"undo_manager.js":function(e,t,n){(function(){var t,n=[].slice;t=function(){function e(){this._undos=[],this._redos=[]}return e.prototype._undos=null,e.prototype._redos=null,e.prototype._isUndoing=!1,e.prototype._isRedoing=!1,e.prototype.canUndo=function(){return this._undos.length!==0},e.prototype.canRedo=function(){return this._redos.length!==0},e.prototype.isUndoing=function(){return this._isUndoing},e.prototype.isRedoing=function(){return this._isRedoing},e.prototype.registerUndo=function(){var e,t,r;return r=arguments[0],t=arguments[1],e=3<=arguments.length?n.call(arguments,2):[],this._isUndoing?this._appendRedo.apply(this,[r,t].concat(n.call(e))):(this._isRedoing||(this._redos.length=0),this._appendUndo.apply(this,[r,t].concat(n.call(e)))),null},e.prototype._appendUndo=function(){var e,t,r;return r=arguments[0],t=arguments[1],e=3<=arguments.length?n.call(arguments,2):[],this._undos.push({target:r,selector:t,args:e})},e.prototype._appendRedo=function(){var e,t,r;return r=arguments[0],t=arguments[1],e=3<=arguments.length?n.call(arguments,2):[],this._redos.push({target:r,selector:t,args:e})},e.prototype.undo=function(){var e,t,n,r;if(!this.canUndo())throw new Error("there are no registered undos");return r=this._undos.pop(),n=r.target,t=r.selector,e=r.args,this._isUndoing=!0,n[t].apply(n,e),this._isUndoing=!1,null},e.prototype.redo=function(){var e,t,n,r;if(!this.canRedo())throw new Error("there are no registered redos");return r=this._redos.pop(),n=r.target,t=r.selector,e=r.args,this._isRedoing=!0,n[t].apply(n,e),this._isRedoing=!1,null},e.prototype.proxyFor=function(e){var t,r,i,s=this;t={},i=function(r){return t[r]=function(){var t;return t=1<=arguments.length?n.call(arguments,0):[],s.registerUndo.apply(s,[e,r].concat(n.call(t)))}};for(r in e){if(e.__lookupGetter__(r))continue;if(typeof e[r]!="function")continue;i(r)}return t},e}(),e.exports=t}).call(this)}},FieldKit=e("index.js")})();