<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: number_formatter_settings_formatter.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: number_formatter_settings_formatter.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import Formatter from './formatter';

class NumberFormatterSettings {
  constructor() {
    /** @type boolean */
    this.alwaysShowsDecimalSeparator = false;

    /** @type number */
    this.groupingSize = 0;

    /** @type number */
    this.maximumFractionDigits = 0;

    /** @type number */
    this.minimumFractionDigits = 0;

    /** @type number */
    this.minimumIntegerDigits = 0;

    /** @type string */
    this.prefix = '';

    /** @type string */
    this.suffix = '';

    /** @type boolean */
    this.usesGroupingSeparator = false;
  }
}

/**
 * Returns a string composed of the given character repeated `length` times.
 *
 * @param {string} character
 * @param {number} length
 * @returns {string}
 * @private
 */
function chars(character, length) {
  return new Array(length + 1).join(character);
}

/**
 * @const
 * @private
 */
var DIGIT = '#';

/**
 * @const
 * @private
 */
var PADDING = '0';

/**
 * @const
 * @private
 */
var DECIMAL_SEPARATOR = '.';

/**
 * @const
 * @private
 */
var GROUPING_SEPARATOR = ',';

class NumberFormatterSettingsFormatter extends Formatter {
  /**
   * @param {NumberFormatterSettings} settings
   * @returns {string}
   */
  format(settings) {
    var result = '';

    var minimumIntegerDigits = settings.minimumIntegerDigits;
    if (minimumIntegerDigits !== 0) {
      result += chars(PADDING, minimumIntegerDigits);
    }

    result = DIGIT + result;

    if (settings.usesGroupingSeparator) {
      while (result.length &lt;= settings.groupingSize) {
        result = DIGIT + result;
      }

      result = result.slice(0, -settings.groupingSize) +
        GROUPING_SEPARATOR +
        result.slice(-settings.groupingSize);
    }

    var minimumFractionDigits = settings.minimumFractionDigits;
    var maximumFractionDigits = settings.maximumFractionDigits;
    var hasFractionalPart = settings.alwaysShowsDecimalSeparator ||
      minimumFractionDigits > 0 ||
      maximumFractionDigits > 0;

    if (hasFractionalPart) {
      result += DECIMAL_SEPARATOR;
      for (var i = 0, length = maximumFractionDigits; i &lt; length; i++) {
        result += (i &lt; minimumFractionDigits) ? PADDING : DIGIT;
      }
    }

    return settings.prefix + result + settings.suffix;
  }

  /**
   * @param {string} string
   * @returns {?NumberFormatterSettings}
   */
  parse(string) {
    var result = new NumberFormatterSettings();

    var hasPassedPrefix = false;
    var hasStartedSuffix = false;
    var decimalSeparatorIndex = null;
    var groupingSeparatorIndex = null;
    var lastIntegerDigitIndex = null;

    for (var i = 0, length = string.length; i &lt; length; i++) {
      var c = string[i];

      switch (c) {
        case DIGIT:
          if (hasStartedSuffix) { return null; }
          hasPassedPrefix = true;
          if (decimalSeparatorIndex !== null) {
            result.maximumFractionDigits++;
          }
          break;

        case PADDING:
          if (hasStartedSuffix) { return null; }
          hasPassedPrefix = true;
          if (decimalSeparatorIndex === null) {
            result.minimumIntegerDigits++;
          } else {
            result.minimumFractionDigits++;
            result.maximumFractionDigits++;
          }
          break;

        case DECIMAL_SEPARATOR:
          if (hasStartedSuffix) { return null; }
          hasPassedPrefix = true;
          decimalSeparatorIndex = i;
          lastIntegerDigitIndex = i - 1;
          break;

        case GROUPING_SEPARATOR:
          if (hasStartedSuffix) { return null; }
          hasPassedPrefix = true;
          groupingSeparatorIndex = i;
          break;

        default:
          if (hasPassedPrefix) {
            hasStartedSuffix = true;
            result.suffix += c;
          } else {
            result.prefix += c;
          }
      }
    }

    if (decimalSeparatorIndex === null) {
      lastIntegerDigitIndex = length - 1;
    }

    if (decimalSeparatorIndex === length - 1) {
      result.alwaysShowsDecimalSeparator = true;
    }

    if (groupingSeparatorIndex !== null) {
      result.groupingSize = lastIntegerDigitIndex - groupingSeparatorIndex;
      result.usesGroupingSeparator = true;
    }

    return result;
  }
}

export default NumberFormatterSettingsFormatter;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Externals</h3><ul><li><a href="external-InputSim.html">InputSim</a></li></ul><h3>Classes</h3><ul><li><a href="AdaptiveCardFormatter.html">AdaptiveCardFormatter</a></li><li><a href="AmexCardFormatter.html">AmexCardFormatter</a></li><li><a href="CardTextField.html">CardTextField</a></li><li><a href="DefaultCardFormatter.html">DefaultCardFormatter</a></li><li><a href="DelimitedTextFormatter.html">DelimitedTextFormatter</a></li><li><a href="ExpiryDateField.html">ExpiryDateField</a></li><li><a href="ExpiryDateFormatter.html">ExpiryDateFormatter</a></li><li><a href="Formatter.html">Formatter</a></li><li><a href="NumberFormatter.html">NumberFormatter</a></li><li><a href="PhoneFormatter.html">PhoneFormatter</a></li><li><a href="SocialSecurityNumberFormatter.html">SocialSecurityNumberFormatter</a></li><li><a href="TextField.html">TextField</a></li><li><a href="UndoManager.html">UndoManager</a></li></ul><h3>Namespaces</h3><ul><li><a href="CurrencyDefaults.html">CurrencyDefaults</a></li><li><a href="FieldKit.html">FieldKit</a></li><li><a href="KEYS.html">KEYS</a></li><li><a href="LocaleDefaults.html">LocaleDefaults</a></li><li><a href="RegionDefaults.html">RegionDefaults</a></li><li><a href="StyleDefaults.html">StyleDefaults</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-dev</a> on Wed Jul 29 2015 16:48:32 GMT-0700 (PDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
